"use strict";(self.webpackChunkasset_ui=self.webpackChunkasset_ui||[]).push([[126],{70126:(ft,z,o)=>{o.r(z),o.d(z,{ScrapModule:()=>mt});var h=o(12057),m=o(75629),u=o(68305),p=o(24751),$=o(15353),e=o(74788),G=o(30187),S=o(58497),c=o(92340);let C=(()=>{class a{constructor(t){this.httpClient=t,this.httpHeader={headers:new S.WM({"content-type":"application/json",Accept:"*/*"})}}GetAllScraps(){return this.httpClient.get(`${c.N.GetAllScraps}`,this.httpHeader)}SortScraps(t,s,r,i){return this.httpClient.post(`${c.N.SortScraps}${t}/${s}`,r,this.httpHeader)}ListScraps(t,s,r){return this.httpClient.post(`${c.N.ListScraps}${t}/${s}`,r,this.httpHeader)}DeleteScrap(t){return this.httpClient.delete(`${c.N.DeleteScrap}${t}`,this.httpHeader)}GetScrapsWithPaging(t){return this.httpClient.put(`${c.N.ListScrapsWithPaging}`,t,this.httpHeader)}GetAllScrapsWithPaging(t,s){return this.httpClient.post(`${c.N.GetAllScrapsWithPaging}${t}/${s}`,this.httpHeader)}GenerateScrapNumber(){return this.httpClient.get(`${c.N.GenerateScrapNumber}`,this.httpHeader)}getCount(){return this.httpClient.get(`${c.N.getScrapscount}`)}ViewScrapById(t){return this.httpClient.get(`${c.N.ViewScrapById}${t}`,this.httpHeader)}CreateScrapAttachments(t){return this.httpClient.post(`${c.N.CreateScrapAttachments}`,t,this.httpHeader)}CreateScrap(t){return this.httpClient.post(`${c.N.AddScrap}`,t,this.httpHeader)}GetScrapById(t){return this.httpClient.get(`${c.N.GetScrapById}${t}`,this.httpHeader)}SelectedScrapById(t){return this.httpClient.get(`${c.N.GetScrapById2}${t}`,this.httpHeader)}SearchInScraps(t,s,r){return this.httpClient.post(`${c.N.SearchInScraps}${s}/${r}`,t,this.httpHeader)}getSearchPDFForScraps(t){return this.httpClient.post(`${c.N.CreateScrapPDF}`,t,this.httpHeader)}CreateScrapCheckedPDF(t){return this.httpClient.post(`${c.N.CreateScrapCheckedPDF}`,t,this.httpHeader)}SearchInScrapsCount(t){return this.httpClient.post(`${c.N.SearchInScrapsCount}`,t,this.httpHeader)}GetScrapAttachmentByScrapId(t){return this.httpClient.get(`${c.N.GetScrapAttachmentByScrapId}${t}`,this.httpHeader)}GetScrapReasonByScrapId(t){return this.httpClient.get(`${c.N.GetScrapReasonByScrapId}${t}`,this.httpHeader)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(S.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),R=(()=>{class a{constructor(t){this.httpClient=t,this.httpHeader={headers:new S.WM({"content-type":"application/json",Accept:"*/*"})}}GetAllScrapReasons(){return this.httpClient.get(`${c.N.GetAllScrapReasons}`,this.httpHeader)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(S.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var w=o(77445),H=o(34131),E=o(11336),b=o(99451),P=o(72180),N=o(83939),j=o(88598),M=o(96516),Z=o(33013),v=o(45121),y=o(89713);function k(a,n){if(1&a&&e._uU(0),2&a){const t=n.$implicit,s=e.oxw();e.HOy(" ","en"==s.lang?t.name:t.nameAr," - ","en"===s.lang?t.brandName:t.brandNameAr," - ",t.model," - ",t.serialNumber," ")}}function V(a,n){if(1&a&&e._uU(0),2&a){const t=e.oxw();e.HOy(" ","en"==t.lang?t.masterAssetObj.name:t.masterAssetObj.nameAr," - ","en"===t.lang?t.masterAssetObj.brandName:t.masterAssetObj.brandNameAr," - ",t.masterAssetObj.model," - ",t.masterAssetObj.serialNumber," ")}}function W(a,n){1&a&&e._uU(0),2&a&&e.hij(" ",n.$implicit.barCode," ")}function X(a,n){1&a&&e._uU(0),2&a&&e.hij(" ",n.$implicit.barCode," ")}function K(a,n){1&a&&e._uU(0),2&a&&e.hij(" ",n.$implicit.serialNumber," ")}function ee(a,n){1&a&&e._uU(0),2&a&&e.hij(" ",n.$implicit.serialNumber," ")}function te(a,n){if(1&a&&(e.TgZ(0,"div",6),e.TgZ(1,"div",13),e._UZ(2,"label",49),e._uU(3),e.qZA(),e.TgZ(4,"div",13),e._UZ(5,"label",50),e._uU(6),e.qZA(),e.TgZ(7,"div",13),e._UZ(8,"label",50),e._uU(9),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("translate","Asset.Brand"),e.xp6(1),e.hij(" ","en"==t.lang?t.scrapObj.brandName:t.scrapObj.brandNameAr," "),e.xp6(2),e.Q6J("translate","Asset.ModelNumber"),e.xp6(1),e.hij(" ",t.scrapObj.model," "),e.xp6(2),e.Q6J("translate","Asset.Department"),e.xp6(1),e.hij(" ",t.scrapObj.departmentName," ")}}function se(a,n){if(1&a&&(e.TgZ(0,"div",6),e.TgZ(1,"div",13),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"div",13),e.TgZ(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"div",13),e.TgZ(12,"label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._uU(15),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,6,"Asset.Building")," "),e.xp6(2),e.hij(" ","en"==t.lang?t.assetBarCodeObj.buildName:t.assetBarCodeObj.buildNameAr," "),e.xp6(3),e.hij(" ",e.lcZ(9,8,"Asset.Floor")," "),e.xp6(2),e.hij(" ","en"==t.lang?t.assetBarCodeObj.floorName:t.assetBarCodeObj.floorNameAr," "),e.xp6(3),e.hij(" ",e.lcZ(14,10,"Asset.Room")," "),e.xp6(2),e.hij(" ","en"==t.lang?t.assetBarCodeObj.roomName:t.assetBarCodeObj.roomNameAr," ")}}function re(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"li"),e.TgZ(1,"mat-checkbox",51),e.NdJ("change",function(r){const l=e.CHM(t).$implicit;return e.oxw().selectedHEReasons(r,l.id)}),e._uU(2),e.qZA(),e._UZ(3,"div",52),e.qZA()}if(2&a){const t=n.$implicit,s=n.index,r=e.oxw();e.xp6(1),e.MGl("id","ckbx",s,""),e.MGl("name","ckbx",s,""),e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==r.lang?t.name:t.nameAr," "),e.xp6(1),e.s9C("name",t.id),e.s9C("id",t.id)}}function ae(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"span",53),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().removeFileFromObjectArray(i)}),e._UZ(7,"i",54),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=n.$implicit;e.xp6(2),e.Oqu(t.fileName),e.xp6(2),e.Oqu(t.title)}}function ie(a,n){1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",55),e.qZA()),2&a&&(e.xp6(1),e.Q6J("translate","Asset.NoData"))}function ne(a,n){1&a&&(e.TgZ(0,"h4",48),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Asset.DateError")))}const Q=function(){return{width:"100%"}},_=function(){return{standalone:!0}},oe=function(){return{width:"350px"}};let le=(()=>{class a{constructor(t,s,r,i,l,d,g,T,f,x,B,L,J,F){this.datePipe=t,this.authenticationService=s,this.scrapService=r,this.scrapReasonService=i,this.activeRoute=l,this.masterAssetService=d,this.formBuilder=g,this.assetDetailService=T,this.requestService=f,this.route=x,this.dialogService=B,this.ref=L,this.assetStatusTransactionService=J,this.uploadService=F,this.isMasterAsset=!1,this.lang=localStorage.getItem("lang"),this.textDir="ltr",this.lstSerials=[],this.lstReasons=[],this.lstassetDetailBarcodes=[],this.lstassetDetails=[],this.isDisabled=!1,this.errorDisplay=!1,this.errorMessage="",this.loading=!0,this.assetStatusId=0,this.lstRequests=[],this.lstProblems=[],this.lstMasterAsset=[],this.lstMaster=[],this.applicationStatus="",this.disabledButton=!1,this.addHEReasons=[],this.lstSelectedReasonIds=[],this.visibleId=0,this.lstCreateScrapAttachment=[],this.formData=new FormData,this.itmIndex=[],this.lstMasterAssets=[],this.error={isError:!1,errorMessage:""},this.dateError=!1,this.display=!1,this.uploadFile=I=>{if(""==this.createScrapAttachment.title)return this.errorDisplay=!0,this.errorMessage="en"==this.lang?"please add document name":"\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u0643\u062a\u0628 \u0627\u0633\u0645 \u0645\u0644\u0641 \u0642\u0628\u0644 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0645\u0644\u0641",!1;if(0===I.length)return this.errorDisplay=!0,this.errorMessage="en"==this.lang?"please select file":"\u0645\u0646 \u0641\u0636\u0644\u0643  \u0627\u062e\u062a\u0631  \u0645\u0644\u0641",!1;{let A=I[0];this.formData.append("file",A,A.name),this.createScrapAttachment.fileName=A.name,this.createScrapAttachment.scrapFile=A,this.AddFileToList()}},this.currentUser=this.authenticationService.currentUserValue}ngOnInit(){this.radioPerioritySelected=4,this.disabledButton=!1,this.firstFormGroup=this.formBuilder.group({firstCtrl:["",p.kI.required]}),this.secondFormGroup=this.formBuilder.group({secondCtrl:["",p.kI.required]}),this.reqObj={strRequestDate:"",departmentId:0,serialNumber:"",createdById:"",problemId:0,masterAssetId:0,requestCode:"",subject:"",requestPeriorityId:0,requestStatusId:0,requestTime:(new Date).getHours()+":"+(new Date).getMinutes(),requestDate:new Date,subProblemId:0,description:"",requestModeId:0,assetDetailId:0,requestTypeId:0,hospitalId:0},this.scrapObj={hospitalId:0,departmentName:"",departmentNameAr:"",assetDetailId:0,scrapNo:"",scrapDate:new Date,strScrapDate:"",sysDate:"",comment:"",departmentId:0,masterAssetId:0,model:"",brandName:"",brandNameAr:"",reasonIds:[]},this.scrapObj.scrapDate=new Date,this.scrapObj.sysDate=(new Date).toDateString(),this.onLoad(),this.page={pagenumber:1,pagesize:10},this.currentUser.hospitalId>0?(this.masterAssetService.ListMasterAssetsByHospitalUserId(this.currentUser.hospitalId,this.currentUser.id).subscribe(s=>{this.lstMasterAsset=s,this.lstMaster=s}),this.assetDetailService.GetAllAssetDetailsByHospitalId(this.currentUser.hospitalId).subscribe(s=>{this.lstassetDetailBarcodes=s,this.lstassetDetailBarcodes.forEach("en"==this.lang?r=>r.name=r.barCode+"-"+r.name:r=>r.name=r.barCode+"-"+r.nameAr)})):this.masterAssetService.GetMasterAssets().subscribe(s=>{this.lstMasterAsset=s,this.lstMaster=s});let t=this.activeRoute.snapshot.params.assetId;(null!=t||null!=t)&&(this.assetId=t,this.masterAssetService.ListMasterAssetsByHospitalUserId(this.currentUser.hospitalId,this.currentUser.id).subscribe(s=>{this.lstMasterAsset=s,this.lstMaster=s}),this.assetDetailService.GetAssetById(t).subscribe(s=>{this.reqObj.masterAssetId=s.masterAssetId,this.assetDetailService.GetAssetNameByMasterAssetIdAndHospitalId(Number(s.masterAssetId),this.currentUser.hospitalId).subscribe(r=>{this.lstassetDetails=r,this.reqObj.assetDetailId=s.id})}))}onLoad(){this.scrapService.GenerateScrapNumber().subscribe(t=>{this.scrapObj.scrapNo=t.scrapNo}),this.reqObj={departmentId:0,strRequestDate:"",hospitalId:0,assetDetailId:0,createdById:"",description:"",masterAssetId:0,problemId:0,requestCode:"",requestDate:new Date,requestModeId:0,requestPeriorityId:0,requestStatusId:0,requestTime:"",requestTypeId:0,serialNumber:"",subProblemId:0,subject:""},this.createScrapAttachment={id:0,scrapId:0,fileName:"",title:"",scrapFile:File},this.scrapReasonService.GetAllScrapReasons().subscribe(t=>{this.lstReasons=t})}onSubmit(){if(this.scrapObj.strScrapDate=this.datePipe.transform(this.scrapObj.scrapDate,"yyyy-MM-dd"),this.lstSelectedReasonIds.length>0&&(this.scrapObj.reasonIds=this.lstSelectedReasonIds),0==this.scrapObj.assetDetailId)return this.errorDisplay=!0,this.errorMessage="en"==this.lang?"Please select Asset":"\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u062c\u0647\u0627\u0632",!1;if(""==this.scrapObj.strScrapDate)return this.errorDisplay=!0,this.errorMessage="en"==this.lang?"Please select Date":"\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u062a\u0627\u0631\u064a\u062e ",!1;let t=this.datePipe.transform(this.scrapObj.scrapDate,"yyyy-MM-dd"),s=this.datePipe.transform(new Date,"yyyy-MM-dd");if(this.isValidDate=this.validateDates(t,s),!this.isValidDate)return this.dateError=!0,!1;this.scrapObj.hospitalId=this.currentUser.hospitalId,this.scrapService.CreateScrap(this.scrapObj).subscribe(r=>{var i=new $.bK;i.assetDetailId=this.scrapObj.assetDetailId,i.hospitalId=this.currentUser.hospitalId,i.statusDate=this.datePipe.transform(new Date,"yyyy-MM-dd HH:mm:ss"),i.assetStatusId=2,this.assetStatusTransactionService.AddAssetStatusTransaction(i).subscribe(l=>{}),this.lstCreateScrapAttachment.length>0?(this.lstCreateScrapAttachment.forEach(l=>{l.scrapId=Number(r),this.lstCreateScrapAttachment.length>0&&(this.lstCreateScrapAttachment.forEach((d,g)=>{d.scrapId=Number(r),this.scrapService.CreateScrapAttachments(d).subscribe(T=>{this.uploadService.uploadScrapFiles(d.scrapFile,d.fileName).subscribe(f=>{this.display=!0},f=>{"en"==this.lang?(this.errorDisplay=!0,this.errorMessage="Could not upload the file:"+d[g].fileName):(this.errorDisplay=!0,this.errorMessage="\u0644\u0627 \u064a\u0645\u0643\u0646 \u0631\u0641\u0639 \u0645\u0644\u0641 "+d[g].fileName)})})}),this.lstCreateScrapAttachment=[])}),this.route.navigate(["/dash/scrap"])):(this.display=!0,this.route.navigate(["/dash/scrap"]))},r=>(this.errorDisplay=!0,"en"==this.lang&&"assetId"==r.error.status&&(this.errorMessage=r.error.message),"ar"==this.lang&&"assetId"==r.error.status&&(this.errorMessage=r.error.messageAr),!1))}AddFileToList(){if(this.createScrapAttachment.scrapId=Number(this.scrapId),0===this.itmIndex.length)t=1;else if(this.itmIndex.length>0){var t=this.itmIndex[this.itmIndex.length-1];t+=1}this.itmIndex.push(t);let s=this.createScrapAttachment.fileName.split(".").pop();var r=this.pad(this.currentUser.hospitalCode,4),i=this.pad(this.reqObj.requestCode,10);let d=this.pad(this.itmIndex[this.itmIndex.length-1].toString(),2);this.createScrapAttachment.fileName=r+"SR"+i+d+"."+s,this.lstCreateScrapAttachment.push(this.createScrapAttachment),this.createScrapAttachment={id:0,fileName:"",title:"",scrapFile:File,scrapId:0}}validateDates(t,s){return this.isValidDate=!0,null!=t&&null!=s&&s<t&&(this.error="en"==this.lang?{isError:!0,errorMessage:"Scrap Date should be less than today Date"}:{isError:!0,errorMessage:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0643\u0647\u064a\u0646 \u0644\u0627\u0628\u062f \u0623\u0646 \u064a\u0643\u0648\u0646 \u0623\u0642\u0644 \u0645\u0646 \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u064a\u0648\u0645"},this.isValidDate=!1),this.isValidDate}closeDialogue(){this.ref.close()}pad(t,s){for(;t.length<s;)t="0"+t;return t}selectedHEReasons(t,s){if(t.checked)this.lstSelectedReasonIds.push(s);else{var r=this.addHEReasons.indexOf(t.source.value);this.lstSelectedReasonIds.splice(r,1)}}getScrapDate(t){this.scrapObj.strScrapDate=this.datePipe.transform(t.value,"MM-dd-yyyy")}ViewAllAssetDetailByMasterId(t){this.lstassetDetails=[],this.lstProblems=[],this.reqObj.problemId=0,this.reqObj.subProblemId=0,this.reqObj.assetDetailId=0,this.assetDetailService.GetAssetNameByMasterAssetIdAndHospitalId(t.target.value,this.currentUser.hospitalId).subscribe(s=>{this.lstassetDetails=s})}removeFileFromObjectArray(t){const s=this.lstCreateScrapAttachment.indexOf(t);-1!==s&&this.lstCreateScrapAttachment.splice(s,1)}getBarCode(t){this.assetDetailService.GetHospitalAssetById(t.id).subscribe(s=>{this.assetBarCodeObj=s,this.assetSerialObj=s,this.assetBarCodeObj.barCode=t.barCode,this.assetSerialObj.serialNumber=t.serialNumber,this.scrapObj.assetDetailId=s.id,this.scrapObj.model=s.model,this.scrapObj.brandName=s.brandName,this.scrapObj.brandNameAr=s.brandNameAr,this.scrapObj.departmentName="en"==this.lang?s.departmentName:s.departmentNameAr}),this.masterAssetService.GetMasterAssetById2(Number(t.masterAssetId)).subscribe(s=>{this.masterAssetObj=s,this.masterAssetObj.master=s.nameAr+" - "+s.brandNameAr+" - "+s.model})}onSelectionChanged(t){this.assetDetailService.AutoCompleteAssetBarCode(t.query,this.currentUser.hospitalId).subscribe(s=>{this.lstassetDetailBarcodes=s,this.lstassetDetailBarcodes.forEach(r=>r.name=r.barCode)})}getSerial(t){this.assetDetailService.GetHospitalAssetById(t.id).subscribe(s=>{this.assetBarCodeObj=s,this.assetSerialObj=s,this.assetBarCodeObj.barCode=t.barCode,this.assetSerialObj.serialNumber=t.serialNumber,this.reqObj.masterAssetId=t.masterAssetId,this.scrapObj.assetDetailId=s.id,this.scrapObj.model=s.model,this.scrapObj.brandName=s.brandName,this.scrapObj.brandNameAr=s.brandNameAr,this.scrapObj.departmentName="en"==this.lang?s.departmentName:s.departmentNameAr}),this.masterAssetService.GetMasterAssetById2(Number(t.masterAssetId)).subscribe(s=>{this.masterAssetObj=s,this.masterAssetObj.master=s.nameAr+" - "+s.brandNameAr+" - "+s.model})}onSerialSelectionChanged(t){this.assetDetailService.AutoCompleteAssetSerial(t.query,this.currentUser.hospitalId).subscribe(s=>{this.lstSerials=s,this.lstSerials.forEach(r=>r.serialNumber=r.serialNumber)})}back(){this.route.navigate(["/dash/scrap"])}onMasterAssetSelectionChanged(t){this.masterAssetService.AutoCompleteMasterAssetName3(t.query,this.currentUser.hospitalId).subscribe(s=>{this.lstMasterAssets=s,this.lstMasterAssets.forEach("en"==this.lang?r=>r.name=r.name+" - "+r.brandName+" - "+r.model+" - "+r.serialNumber:r=>r.name=r.nameAr+" - "+r.brandNameAr+" - "+r.model+" - "+r.serialNumber)})}getMasterObject(t){this.scrapObj.assetDetailId=t.id,this.assetDetailService.GetHospitalAssetById(t.id).subscribe(s=>{this.assetBarCodeObj=s,this.assetSerialObj=s,this.assetBarCodeObj.barCode=t.barCode,this.assetSerialObj.serialNumber=t.serialNumber,this.scrapObj.model=s.model,this.scrapObj.brandName=s.brandName,this.scrapObj.brandNameAr=s.brandNameAr,this.scrapObj.departmentName="en"==this.lang?s.departmentName:s.departmentNameAr})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(h.uU),e.Y36(G.$),e.Y36(C),e.Y36(R),e.Y36(u.gz),e.Y36(w.D),e.Y36(p.qu),e.Y36(H.$),e.Y36(E.s),e.Y36(u.F0),e.Y36(b.xA),e.Y36(b.E7),e.Y36(P.j),e.Y36(N.X))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create"]],decls:104,vars:101,consts:[[1,"container","card"],[1,"card-header","cardHeader"],[1,"card-title",2,"font-size","30px","color","#1683c2","font-weight","bold",3,"translate"],[1,"card-body"],[3,"ngSubmit"],["form","ngForm"],[1,"row","top-buffer"],[1,"col-12"],["for","code",3,"translate"],["type","text","id","code","name","code","disabled","",1,"form-control",3,"ngModel","value","ngModelChange"],["code","ngModel"],["for","scrapDate",3,"translate"],["name","scrapDate","yearRange","1900:2030","inputId","icon","appendTo","body","showButtonBar","true","dateFormat","dd/mm/yy",3,"clearButtonStyleClass","ngModel","showIcon","yearNavigator","monthNavigator","ngModelOptions","inputStyle","ngModelChange","onSelect"],[1,"col-4"],["for","masterAssetId",3,"translate"],["appendTo","body","name","assetDetailId","id","assetDetailId","field","name",3,"ngModel","ngModelOptions","suggestions","placeholder","dropdown","ngModelChange","completeMethod","onSelect"],["pTemplate","item"],["pTemplate","selectedItem"],["for","barcode",3,"translate"],["name","barcode","id","barcode","field","barCode",3,"ngModel","ngModelOptions","suggestions","autoWidth","placeholder","dropdown","showClear","ngModelChange","completeMethod","onSelect"],["barcode","ngModel"],["for","serial",3,"translate"],["name","serialNumber","id","serialNumber","field","serialNumber",3,"ngModel","ngModelOptions","suggestions","autoWidth","placeholder","dropdown","showClear","ngModelChange","completeMethod","onSelect"],["serialNumber","ngModel"],["class","row top-buffer",4,"ngIf"],["for","comment"],["type","text","name","comment","pInputText","",1,"form-control",3,"ngModelOptions","ngModel","placeholder","ngModelChange"],["comment","ngModel"],[1,"col-6"],["for","exreasons",3,"translate"],[4,"ngFor","ngForOf"],[1,"col-10"],["for","title"],["name","title","type","text","pInputText","",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],["title","ngModel"],[1,"col-2"],["type","file","name","file","placeholder","Choose file",2,"display","none",3,"change","click"],["file",""],["type","button",1,"btn","btn-outline-success",2,"margin-top","20px","margin-left","10px",3,"disabled","click"],[1,"fa","fa-upload",2,"color","#61bb20","cursor","pointer","margin","0px 5px"],[1,"table"],[4,"ngIf"],["type","submit",1,"btn","btn-primary","pull-center","btn-sm",2,"margin","0px 5px","background-color","#1483c2","border-color","#1483c2",3,"translate"],[1,"btn","btn-primary","pull-center","btn-sm",2,"margin","0px 5px","background-color","#7e8083 !important","border-color","#7e8083",3,"click"],["appendTo","body","modal","true",3,"visible","visibleChange"],[2,"color","rgb(181, 4, 4)"],[2,"color","rgb(181, 4, 4)","font-weight","bold"],["pTemplate","header"],[2,"color","red"],["for","brandId",3,"translate"],["for","model",3,"translate"],[3,"id","name","value","change"],[3,"name","id"],[3,"click"],[1,"fa-solid","fa-times-circle",2,"color","rgb(123, 9, 9)"],["colspan","3",2,"color","rgb(102, 97, 23)",3,"translate"]],template:function(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"h5",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"form",4,5),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"label",8),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",9,10),e.NdJ("ngModelChange",function(l){return s.scrapObj.scrapNo=l}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"div",7),e.TgZ(15,"label",11),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"br"),e.TgZ(19,"p-calendar",12),e.NdJ("ngModelChange",function(l){return s.scrapObj.scrapDate=l})("onSelect",function(l){return s.getScrapDate(l)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",6),e.TgZ(21,"div",13),e._UZ(22,"label",14),e.TgZ(23,"p-autoComplete",15),e.NdJ("ngModelChange",function(l){return s.masterAssetObj=l})("completeMethod",function(l){return s.onMasterAssetSelectionChanged(l)})("onSelect",function(l){return s.getMasterObject(l)}),e.ALo(24,"translate"),e.YNc(25,k,1,4,"ng-template",16),e.YNc(26,V,1,4,"ng-template",17),e.qZA(),e.qZA(),e.TgZ(27,"div",13),e.TgZ(28,"label",18),e._uU(29,"Barcode"),e.qZA(),e.TgZ(30,"p-autoComplete",19,20),e.NdJ("ngModelChange",function(l){return s.assetBarCodeObj=l})("completeMethod",function(l){return s.onSelectionChanged(l)})("onSelect",function(l){return s.getBarCode(l)}),e.ALo(32,"translate"),e.YNc(33,W,1,1,"ng-template",16),e.YNc(34,X,1,1,"ng-template",17),e.qZA(),e.qZA(),e.TgZ(35,"div",13),e.TgZ(36,"label",21),e._uU(37,"Serial"),e.qZA(),e.TgZ(38,"p-autoComplete",22,23),e.NdJ("ngModelChange",function(l){return s.assetSerialObj=l})("completeMethod",function(l){return s.onSerialSelectionChanged(l)})("onSelect",function(l){return s.getSerial(l)}),e.ALo(40,"translate"),e.YNc(41,K,1,1,"ng-template",16),e.YNc(42,ee,1,1,"ng-template",17),e.qZA(),e.qZA(),e.qZA(),e.YNc(43,te,10,6,"div",24),e.YNc(44,se,16,12,"div",24),e.TgZ(45,"div",6),e.TgZ(46,"div",7),e.TgZ(47,"label",25),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"textarea",26,27),e.NdJ("ngModelChange",function(l){return s.scrapObj.comment=l}),e.ALo(52,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",6),e.TgZ(54,"div",28),e._UZ(55,"label",29),e.TgZ(56,"ul"),e.YNc(57,re,4,6,"li",30),e.qZA(),e.qZA(),e.qZA(),e.TgZ(58,"div",6),e.TgZ(59,"div",31),e.TgZ(60,"label",32),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"input",33,34),e.NdJ("ngModelChange",function(l){return s.createScrapAttachment.title=l}),e.ALo(65,"translate"),e.qZA(),e.qZA(),e.TgZ(66,"div",35),e.TgZ(67,"input",36,37),e.NdJ("change",function(){e.CHM(r);const l=e.MAs(68);return s.uploadFile(l.files)})("click",function(l){return l.target.value=null}),e.qZA(),e.TgZ(69,"button",38),e.NdJ("click",function(){return e.CHM(r),e.MAs(68).click()}),e._UZ(70,"i",39),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",6),e.TgZ(74,"div",7),e.TgZ(75,"table",40),e.TgZ(76,"thead"),e.TgZ(77,"tr"),e.TgZ(78,"th"),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"th"),e._uU(82),e.ALo(83,"translate"),e.qZA(),e._UZ(84,"th"),e.qZA(),e.qZA(),e.TgZ(85,"tbody"),e.YNc(86,ae,8,2,"tr",30),e.YNc(87,ie,2,1,"tr",41),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"div",6),e.TgZ(89,"div",7),e._UZ(90,"button",42),e.TgZ(91,"button",43),e.NdJ("click",function(){return s.back()}),e._uU(92),e.ALo(93,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(94,"p-dialog",44),e.NdJ("visibleChange",function(l){return s.errorDisplay=l}),e.TgZ(95,"p-header",45),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"span",46),e._uU(99),e.qZA(),e.qZA(),e.TgZ(100,"p-dialog",44),e.NdJ("visibleChange",function(l){return s.dateError=l}),e.YNc(101,ne,3,3,"ng-template",47),e.TgZ(102,"span",48),e._uU(103),e.qZA(),e.qZA()}2&t&&(e.xp6(2),e.Q6J("translate","Asset.AddScrap"),e.xp6(6),e.Q6J("translate","Asset.Code"),e.xp6(1),e.hij("",e.lcZ(10,65,"Asset.ScrapNo")," "),e.xp6(2),e.Q6J("ngModel",s.scrapObj.scrapNo)("value",0),e.xp6(4),e.Q6J("translate","Asset.ScrapDate"),e.xp6(1),e.hij(" ",e.lcZ(17,67,"Asset.ScrapDate"),""),e.xp6(3),e.Akn(e.DdM(93,Q)),e.Q6J("clearButtonStyleClass","hideClearButton")("ngModel",s.scrapObj.scrapDate)("showIcon",!0)("yearNavigator",!0)("monthNavigator",!0)("ngModelOptions",e.DdM(94,_))("inputStyle",e.DdM(95,Q)),e.xp6(3),e.Q6J("translate","Asset.Name"),e.xp6(1),e.s9C("placeholder",e.lcZ(24,69,"Asset.AssetName")),e.Q6J("ngModel",s.masterAssetObj)("ngModelOptions",e.DdM(96,_))("suggestions",s.lstMasterAssets)("dropdown",!1),e.xp6(5),e.Q6J("translate","Asset.Barcode"),e.xp6(2),e.s9C("placeholder",e.lcZ(32,71,"Asset.Barcode")),e.Q6J("ngModel",s.assetBarCodeObj)("ngModelOptions",e.DdM(97,_))("suggestions",s.lstassetDetailBarcodes)("autoWidth",!0)("dropdown",!1)("showClear",!0),e.xp6(6),e.Q6J("translate","Asset.Serial"),e.xp6(2),e.s9C("placeholder",e.lcZ(40,73,"Asset.Serial")),e.Q6J("ngModel",s.assetSerialObj)("ngModelOptions",e.DdM(98,_))("suggestions",s.lstSerials)("autoWidth",!0)("dropdown",!1)("showClear",!0),e.xp6(5),e.Q6J("ngIf",null!=s.assetBarCodeObj||null!=s.assetBarCodeObj),e.xp6(1),e.Q6J("ngIf",null!=s.assetBarCodeObj||null!=s.assetBarCodeObj),e.xp6(4),e.hij(" ",e.lcZ(49,75,"Asset.Comment"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(52,77,"Asset.Comment")),e.Q6J("ngModelOptions",e.DdM(99,_))("ngModel",s.scrapObj.comment),e.xp6(5),e.Q6J("translate","Asset.Reasons"),e.xp6(2),e.Q6J("ngForOf",s.lstReasons),e.xp6(4),e.hij(" ",e.lcZ(62,79,"Asset.DocumentName"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(65,81,"Asset.DocumentName")),e.Q6J("ngModel",s.createScrapAttachment.title)("disabled",s.isDisabled),e.xp6(6),e.Q6J("disabled",s.isDisabled),e.xp6(2),e.hij("",e.lcZ(72,83,"Asset.SelectDocumentTitle")," "),e.xp6(8),e.Oqu(e.lcZ(80,85,"Asset.Name")),e.xp6(3),e.Oqu(e.lcZ(83,87,"Asset.DocumentTitle")),e.xp6(4),e.Q6J("ngForOf",s.lstCreateScrapAttachment),e.xp6(1),e.Q6J("ngIf",0==s.lstCreateScrapAttachment.length),e.xp6(3),e.Q6J("translate","Asset.Save"),e.xp6(2),e.Oqu(e.lcZ(93,89,"Asset.Back")),e.xp6(2),e.Akn(e.DdM(100,oe)),e.Q6J("visible",s.errorDisplay),e.xp6(2),e.hij(" ",e.lcZ(97,91,"Asset.Error")," "),e.xp6(3),e.hij(" ",s.errorMessage,""),e.xp6(1),e.Q6J("visible",s.dateError),e.xp6(3),e.hij(" ",s.error.errorMessage," "))},directives:[m.Pi,p._Y,p.JL,p.F,p.Fj,p.JJ,p.On,j.f,M.Qc,Z.jx,h.O5,h.sg,v.V,Z.h4,y.oG],pipes:[m.X$],styles:[".hideClearButton{display:none!important}ul[_ngcontent-%COMP%]{list-style:none}li[_ngcontent-%COMP%]{list-style:none}"]}),a})();var U=o(99287);function ce(a,n){if(1&a&&(e.TgZ(0,"div"),e.TgZ(1,"li"),e._uU(2),e.qZA(),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.xp6(2),e.hij(" ","en"==s.lang?t.scrapReasonName:t.scrapReasonNameAr," ")}}function de(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",11),e.TgZ(6,"a",15),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().downloadFile(i.fileName)}),e._UZ(7,"i",16),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=n.$implicit;e.xp6(2),e.Oqu(t.fileName),e.xp6(2),e.Oqu(t.title)}}const pe=function(){return{width:"350px"}};let he=(()=>{class a{constructor(t,s,r,i){this.ref=t,this.scrapService=s,this.config=r,this.uploadService=i,this.lang=localStorage.getItem("lang"),this.textDir="ltr",this.errorMessage="",this.errorDisplay=!1,this.statusId=0,this.lstScrapAttachment=[],this.lstScrapReasons=[]}ngOnInit(){if("en"==this.lang?this.textDir="ltr":"ar"==this.lang&&(this.textDir="rtl"),this.scrapObj={id:0,scrapNo:"",scrapDate:"",model:"",brandName:"",brandNameAr:"",assetName:"",assetNameAr:"",barcode:"",comment:"",reasonName:"",reasonNameAr:"",serialNumber:"",departmentName:"",departmentNameAr:""},null!=this.config.data||null!=this.config.data){let t=this.config.data.id;this.scrapService.ViewScrapById(t).subscribe(s=>{this.scrapObj=s,this.scrapObj.departmentName="en"==this.lang?this.scrapObj.departmentName:this.scrapObj.departmentNameAr,this.scrapService.GetScrapAttachmentByScrapId(t).subscribe(r=>{this.lstScrapAttachment=r}),this.scrapService.GetScrapReasonByScrapId(t).subscribe(r=>{this.lstScrapReasons=r})},s=>console.log(s))}}downloadFile(t){var s=`${c.N.Domain}UploadedAttachments/`;this.uploadService.downloadScrapFile(t).subscribe(r=>{(""!=t||null!=t)&&window.open(s+"ScrapFiles/"+t)})}close(){this.ref.close({data:this.statusId})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(b.E7),e.Y36(C),e.Y36(b.S),e.Y36(N.X))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-view"]],decls:92,vars:70,consts:[[1,"top-buffer"],[1,"card"],[1,"card-body"],[1,"card-title",2,"font-weight","bold","background-color","#cedef1","padding","0px 10px"],[1,"row","top-buffer"],[1,"col-md-4"],[2,"font-weight","bold"],[1,"col-md-12"],[1,"col-md-6"],[4,"ngFor","ngForOf"],[1,"table","table-bordered","table-striped","table-hover",2,"width","100%"],[2,"text-align","center"],["appendTo","body","modal","true",3,"visible","visibleChange"],[2,"color","rgb(181, 4, 4)"],[2,"color","rgb(181, 4, 4)","font-weight","bold"],["pTooltip","Download Files","tooltipPosition","bottom",3,"click"],[1,"fa-solid","fa","fa-download",2,"color","#61bb20"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"span",6),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._uU(11),e.qZA(),e.TgZ(12,"div",5),e.TgZ(13,"span",6),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"div",5),e.TgZ(18,"span",6),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",4),e.TgZ(23,"div",5),e.TgZ(24,"span",6),e._uU(25),e.ALo(26,"translate"),e.qZA(),e._uU(27),e.qZA(),e.TgZ(28,"div",5),e.TgZ(29,"span",6),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._uU(32),e.qZA(),e.TgZ(33,"div",5),e.TgZ(34,"span",6),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._uU(37),e.qZA(),e.qZA(),e._UZ(38,"br"),e.TgZ(39,"h3",3),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"div",4),e.TgZ(43,"div",7),e.TgZ(44,"span",6),e._uU(45),e.ALo(46,"translate"),e.qZA(),e._uU(47),e.qZA(),e.qZA(),e.TgZ(48,"div",4),e.TgZ(49,"div",8),e.TgZ(50,"span",6),e._uU(51),e.ALo(52,"translate"),e.qZA(),e._uU(53),e.qZA(),e.TgZ(54,"div",8),e.TgZ(55,"span",6),e._uU(56),e.ALo(57,"translate"),e.qZA(),e._uU(58),e.ALo(59,"date"),e.qZA(),e.qZA(),e.TgZ(60,"div",4),e.TgZ(61,"div",7),e.TgZ(62,"span",6),e._uU(63),e.ALo(64,"translate"),e.qZA(),e._uU(65,"\xa0 "),e.YNc(66,ce,3,1,"div",9),e.qZA(),e.qZA(),e._UZ(67,"br"),e.TgZ(68,"h3",3),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"div",4),e.TgZ(72,"table",10),e.TgZ(73,"thead"),e.TgZ(74,"tr"),e.TgZ(75,"th"),e._uU(76),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"th"),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"th",11),e._uU(82),e.ALo(83,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(84,"tbody"),e.YNc(85,de,8,2,"tr",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"p-dialog",12),e.NdJ("visibleChange",function(i){return s.errorDisplay=i}),e.TgZ(87,"p-header",13),e._uU(88),e.ALo(89,"translate"),e.qZA(),e.TgZ(90,"span",14),e._uU(91),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij(" ",e.lcZ(5,32,"Asset.Main")," "),e.xp6(5),e.hij("",e.lcZ(10,34,"Asset.Name")," : "),e.xp6(2),e.hij("","en"==s.lang?s.scrapObj.assetName:s.scrapObj.assetNameAr," "),e.xp6(3),e.hij("",e.lcZ(15,36,"Asset.Serial")," : "),e.xp6(2),e.hij("",s.scrapObj.serialNumber," "),e.xp6(3),e.hij("",e.lcZ(20,38,"Asset.Barcode")," : "),e.xp6(2),e.hij("",s.scrapObj.barcode," "),e.xp6(4),e.hij("",e.lcZ(26,40,"Asset.Brand")," : "),e.xp6(2),e.hij("","en"==s.lang?s.scrapObj.brandName:s.scrapObj.brandNameAr," "),e.xp6(3),e.hij(" ",e.lcZ(31,42,"Asset.Model")," : "),e.xp6(2),e.hij("",s.scrapObj.model," "),e.xp6(3),e.hij(" ",e.lcZ(36,44,"Asset.Department")," : "),e.xp6(2),e.hij("",s.scrapObj.departmentName," "),e.xp6(3),e.hij(" ",e.lcZ(41,46,"Asset.ScrapDetails")," "),e.xp6(5),e.hij(" ",e.lcZ(46,48,"Asset.ScrapNo")," : "),e.xp6(2),e.hij("",s.scrapObj.scrapNo," "),e.xp6(4),e.hij(" ",e.lcZ(52,50,"Asset.Comment")," : "),e.xp6(2),e.hij("\xa0",s.scrapObj.comment," "),e.xp6(3),e.hij("",e.lcZ(57,52,"Asset.ScrapDate")," : "),e.xp6(2),e.hij("\xa0",e.xi3(59,54,s.scrapObj.scrapDate,"yyyy-MM-dd")," "),e.xp6(5),e.hij(" ",e.lcZ(64,57,"Asset.Reasons")," : "),e.xp6(3),e.Q6J("ngForOf",s.lstScrapReasons),e.xp6(3),e.hij(" ",e.lcZ(70,59,"Asset.Attachments")," "),e.xp6(7),e.Oqu(e.lcZ(77,61,"Asset.Name")),e.xp6(3),e.Oqu(e.lcZ(80,63,"Asset.Title")),e.xp6(3),e.hij(" ",e.lcZ(83,65,"Asset.Download")," "),e.xp6(3),e.Q6J("ngForOf",s.lstScrapAttachment),e.xp6(1),e.Akn(e.DdM(69,pe)),e.Q6J("visible",s.errorDisplay),e.xp6(2),e.hij(" ",e.lcZ(89,67,"Asset.Error")," "),e.xp6(3),e.hij(" ",s.errorMessage,""))},directives:[h.sg,v.V,Z.h4,U.u],pipes:[m.X$,h.uU],styles:[""]}),a})();var O=o(20592),Y=o(3069),ue=o(43239);let ge=(()=>{class a{constructor(t,s,r,i,l){this.dialog=t,this.data=s,this.scrapService=r,this._snackBar=i,this.route=l,this.lang=localStorage.getItem("lang"),this.textDir="ltr",this.name="",this.arabicName="",this.message="",this.errorDisplay=!1,this.scrapObj={...s},this.id=this.scrapObj.id}ngOnInit(){"en"==this.lang?this.textDir="ltr":"ar"==this.lang&&(this.textDir="rtl")}close(){this.dialog.close(),this._snackBar.dismiss()}delete(){this.scrapService.DeleteScrap(this.id).subscribe(t=>{this.message="Data is deleted successfully",this.action="close",this._snackBar.open(this.message,this.action,{panelClass:"snackbar"}),this.dialog.close()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(O.so),e.Y36(O.WI),e.Y36(C),e.Y36(Y.ux),e.Y36(u.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-deleteconfirmation"]],decls:1,vars:3,consts:[[3,"name","close","delete"]],template:function(t,s){1&t&&e._UZ(0,"app-delete",0),2&t&&e.Q6J("name",s.name)("close",s.close.bind(s))("delete",s.delete.bind(s))},directives:[ue.T],styles:[""]}),a})();var me=o(10657),be=o(57571),Ae=o(91832),Ze=o(12105),_e=o(59577),fe=o(8266),Se=o(67362),Ce=o(34473),ve=o(79250),Oe=o(82044),Te=o(4207),q=o(70464);function Ie(a,n){if(1&a&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==s.lang?t.name:t.nameAr," ")}}function Ne(a,n){if(1&a&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==s.lang?t.name:t.nameAr," ")}}function je(a,n){if(1&a&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==s.lang?t.name:t.nameAr," ")}}function Me(a,n){if(1&a&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==s.lang?t.name:t.nameAr," ")}}function ye(a,n){if(1&a&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==s.lang?t.name:t.nameAr," ")}}function Ue(a,n){if(1&a&&e._uU(0),2&a){const t=n.$implicit,s=e.oxw();e.lnq(" ","en"===s.lang?t.name:t.nameAr," - ","en"===s.lang?t.brandName:t.brandNameAr," - ",t.model," ")}}function qe(a,n){if(1&a&&e._uU(0),2&a){const t=n.$implicit,s=e.oxw();e.lnq(" ","en"==s.lang?t.name:t.nameAr," - ","en"===s.lang?t.brandName:t.brandNameAr," - ",t.model," ")}}function De(a,n){1&a&&e._uU(0),2&a&&e.hij(" ",n.$implicit.barCode," ")}function xe(a,n){1&a&&e._uU(0),2&a&&e.hij(" ",n.$implicit.barCode," ")}function Be(a,n){1&a&&e._uU(0),2&a&&e.hij(" ",n.$implicit.serial," ")}function Le(a,n){1&a&&e._uU(0),2&a&&e.hij(" ",n.$implicit.serial," ")}function Je(a,n){if(1&a&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==s.lang?t.name:t.nameAr," ")}}function Fe(a,n){if(1&a&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==s.lang?t.name:t.nameAr," ")}}function ze(a,n){if(1&a&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==s.lang?t.name:t.nameAr," ")}}function Ge(a,n){if(1&a&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&a){const t=n.$implicit,s=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.hij(" ","en"==s.lang?t.name:t.nameAr," ")}}function we(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"th",63),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"th",63),e.TgZ(6,"p-sortIcon",64),e.NdJ("click",function(r){return e.CHM(t),e.oxw().sort(r)}),e.ALo(7,"translate"),e.qZA(),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",65),e.TgZ(11,"p-sortIcon",64),e.NdJ("click",function(r){return e.CHM(t),e.oxw().sort(r)}),e.ALo(12,"translate"),e.qZA(),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th",65),e.TgZ(16,"p-sortIcon",64),e.NdJ("click",function(r){return e.CHM(t),e.oxw().sort(r)}),e.ALo(17,"translate"),e.qZA(),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"th",63),e.TgZ(21,"p-sortIcon",64),e.NdJ("click",function(r){return e.CHM(t),e.oxw().sort(r)}),e.ALo(22,"translate"),e.qZA(),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th",63),e.TgZ(26,"p-sortIcon",64),e.NdJ("click",function(r){return e.CHM(t),e.oxw().sort(r)}),e.ALo(27,"translate"),e.qZA(),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"th",63),e._uU(31),e.ALo(32,"translate"),e.TgZ(33,"p-sortIcon",64),e.NdJ("click",function(r){return e.CHM(t),e.oxw().sort(r)}),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.TgZ(35,"th",65),e.TgZ(36,"p-sortIcon",64),e.NdJ("click",function(r){return e.CHM(t),e.oxw().sort(r)}),e.ALo(37,"translate"),e.qZA(),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"th",65),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.qZA()}2&a&&(e.xp6(2),e.Q6J("sortable",!0),e.xp6(1),e.hij(" ",e.lcZ(4,21,"Asset.Id")," "),e.xp6(2),e.Q6J("sortable",!0),e.xp6(1),e.s9C("id",e.lcZ(7,23,"Asset.Name")),e.xp6(2),e.hij(" ",e.lcZ(9,25,"Asset.Name")," "),e.xp6(3),e.s9C("id",e.lcZ(12,27,"Asset.Brand")),e.xp6(2),e.hij(" ",e.lcZ(14,29,"Asset.Brand")," "),e.xp6(3),e.s9C("id",e.lcZ(17,31,"Asset.ModelNumber")),e.xp6(2),e.hij(" ",e.lcZ(19,33,"Asset.ModelNumber")," "),e.xp6(2),e.Q6J("sortable",!0),e.xp6(1),e.s9C("id",e.lcZ(22,35,"Asset.AssetSerial")),e.xp6(2),e.hij(" ",e.lcZ(24,37,"Asset.AssetSerial")," "),e.xp6(2),e.Q6J("sortable",!0),e.xp6(1),e.s9C("id",e.lcZ(27,39,"Asset.Barcode")),e.xp6(2),e.hij(" ",e.lcZ(29,41,"Asset.Barcode")," "),e.xp6(2),e.Q6J("sortable",!0),e.xp6(1),e.hij(" ",e.lcZ(32,43,"Asset.ScrapDate")," "),e.xp6(2),e.s9C("id",e.lcZ(34,45,"Asset.ScrapDate")),e.xp6(3),e.s9C("id",e.lcZ(37,47,"Asset.Department")),e.xp6(2),e.hij(" ",e.lcZ(39,49,"Asset.Department")," "),e.xp6(3),e.hij(" ",e.lcZ(42,51,"Asset.Actions")," "))}const He=function(a){return["/dash/hospitalassets/detail/",a]};function Qe(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"mat-checkbox",66),e.NdJ("change",function(r){const l=e.CHM(t).$implicit;return e.oxw().checkedScraps(r,l.id)}),e.qZA(),e.qZA(),e.TgZ(3,"td",65),e._uU(4),e.qZA(),e.TgZ(5,"td",65),e.TgZ(6,"a",67),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"td",65),e._uU(9),e.qZA(),e.TgZ(10,"td",65),e._uU(11),e.qZA(),e.TgZ(12,"td",65),e._uU(13),e.qZA(),e.TgZ(14,"td",65),e._uU(15),e.qZA(),e.TgZ(16,"td",65),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"td",65),e._uU(20),e.qZA(),e.TgZ(21,"td",65),e.TgZ(22,"span",68),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().viewScrap(i.id)}),e._UZ(23,"i",69),e.qZA(),e.TgZ(24,"span",70),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().deleteScrap(i.id)}),e._UZ(25,"i",71),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=n.$implicit,s=e.oxw();e.xp6(2),e.MGl("id","ckbx",t.id,""),e.MGl("name","ckbx",t.id,""),e.Q6J("value",t.id),e.xp6(2),e.Oqu(t.scrapNo),e.xp6(2),e.Q6J("routerLink",e.VKq(15,He,t.assetId)),e.xp6(1),e.Oqu("en"==s.lang?t.assetName:t.assetNameAr),e.xp6(2),e.Oqu("en"==s.lang?t.brandName:t.brandNameAr),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Oqu(t.serialNumber),e.xp6(2),e.Oqu(t.barcode),e.xp6(2),e.Oqu(e.xi3(18,12,t.scrapDate,"dd-MM-yyyy")),e.xp6(3),e.Oqu("en"==s.lang?t.departmentName:t.departmentNameAr)}}const Ye=function(){return["/scrap/AddScrap"]},D=function(){return{standalone:!0}},$e=function(){return{width:"350px"}},Re=[{path:"",component:(()=>{class a{constructor(t,s,r,i,l,d,g,T,f,x,B,L,J,F,I,A,bt,At,Zt,_t){this.authenticationService=t,this.router=s,this.dialogService=r,this.scrapService=i,this.dialog=l,this.masterAssetService=d,this.governorateService=g,this.cityService=T,this.assetDetailService=f,this.organizationService=x,this.subOrganizationService=B,this.departmentService=L,this.hospitalService=J,this.uploadService=F,this.datePipe=I,this.supplierService=A,this.originService=bt,this.brandService=At,this.activateRoute=Zt,this.breadcrumbService=_t,this.lang=localStorage.getItem("lang"),this.textDir="ltr",this.errorDisplay=!1,this.lstScraps=[],this.sortStatus="descending",this.lstMasterAssets=[],this.lstDepartments=[],this.lstHospitals=[],this.lstassetDetailBarcodes=[],this.lstAssetSerailNumberObj=[],this.lstHospitalAssets=[],this.show=!1,this.buttonName="Show",this.isGov=!1,this.isCity=!1,this.isOrg=!1,this.isSubOrg=!1,this.isHospital=!1,this.isHospital2=!1,this.isAssetOwner=!1,this.isEngManager=!1,this.isHospitalManager=!1,this.isAdmin=!1,this.isSuperAdmin=!1,this.lstRoleNames=[],this.lstCheckedScraps=[],this.lstScrapIds=[],this.currentUser=this.authenticationService.currentUserValue}ngOnInit(){this.currentUser&&(this.currentUser.roleNames.forEach(r=>{this.lstRoleNames.push(r.name)}),this.isHospital2=["Admin","TLHospitalManager"].some(r=>this.lstRoleNames.includes(r)),this.isAssetOwner=["AssetOwner"].some(r=>this.lstRoleNames.includes(r)),this.isAdmin=["Admin"].some(r=>this.lstRoleNames.includes(r)),this.isEngManager=["EngDepManager"].some(r=>this.lstRoleNames.includes(r)),this.isHospitalManager=["TLHospitalManager"].some(r=>this.lstRoleNames.includes(r)),this.sortFilterObjects={searchObj:{userId:"",end:"",start:"",startDate2:"",endDate2:"",startDate:"",endDate:"",lang:"",printedBy:"",hospitalName:"",hospitalNameAr:"",scrapEndDate:new Date,scrapStartDate:new Date,AssetDetailId:0,ScrapNo:"",ScrapDate:"",barCode:"",departmentId:0,hospitalId:0,masterAssetId:0,modelNumber:"",serialNumber:"",periorityId:0,governorateId:0,cityId:0,organizationId:0,subOrganizationId:0,originId:0,brandId:0,supplierId:0},sortObj:{sortBy:"",scrapDate:"",assetName:"",assetNameAr:"",serialNumber:"",barcode:"",scrapNo:"",departmentName:"",departmentNameAr:"",sortStatus:""}}),this.page={pagenumber:1,pagesize:10};const s=this.breadcrumbService.getParentUrlSegments();this.breadcrumbService.addBreadcrumb(this.activateRoute.snapshot,s,["Asset.AssetTransfer","Asset.Execludes","Asset.Scrap"]),this.supplierService.GetSuppliers().subscribe(r=>{this.lstSuppliers=r}),this.originService.GetOrigins().subscribe(r=>{this.lstOrigins=r}),this.brandService.GetBrands().subscribe(r=>{this.lstBrands=r}),0!=this.currentUser.hospitalId?this.departmentService.DepartmentsByHospitalId(this.currentUser.hospitalId).subscribe(r=>{this.lstDepartments=r}):this.departmentService.GetDepartments().subscribe(r=>{this.lstDepartments=r}),this.searchObj.scrapStartDate=null,this.searchObj.scrapEndDate=null,this.onLoadByLogIn()}onLoadByLogIn(){this.currentUser.hospitalId>0&&this.currentUser.organizationId>0&&this.currentUser.subOrganizationId>0?(this.organizationService.GetOrganizations().subscribe(t=>{this.lstOrganizations=t,this.currentUser.organizationId>0&&(this.searchObj.organizationId=this.currentUser.organizationId,this.isOrg=!0,this.subOrganizationService.GetSubOrganizationByOrgId(this.currentUser.organizationId).subscribe(s=>{this.lstSubOrganizations=s,this.currentUser.subOrganizationId>0&&(this.searchObj.subOrganizationId=this.currentUser.subOrganizationId,this.isSubOrg=!0,this.hospitalService.GetHospitalsBySubOrganizationId(this.currentUser.organizationId).subscribe(r=>{this.lstHospitals=r,this.searchObj.hospitalId=this.currentUser.hospitalId,this.isHospital=!0,this.assetDetailService.GetListOfAssetDetailsByHospitalId(this.searchObj.hospitalId).subscribe(i=>{this.lstHospitalAssets=i})}))}))}),this.governorateService.GetGovernorates().subscribe(t=>{this.lstGovernorates=t}),this.hospitalService.GetHospitalById(this.currentUser.hospitalId).subscribe(t=>{this.searchObj.governorateId=t.governorateId,this.isGov=!0,this.cityService.GetCitiesByGovernorateId(this.searchObj.governorateId).subscribe(s=>{this.lstCities=s}),this.searchObj.cityId=t.cityId,this.isCity=!0})):this.currentUser.hospitalId>0&&this.currentUser.governorateId>0&&this.currentUser.cityId>0?(this.governorateService.GetGovernorates().subscribe(t=>{this.lstGovernorates=t,this.currentUser.governorateId>0&&(this.searchObj.governorateId=this.currentUser.governorateId,this.isGov=!0,this.cityService.GetCitiesByGovernorateId(this.currentUser.governorateId).subscribe(s=>{this.lstCities=s,this.currentUser.cityId>0&&(this.searchObj.cityId=this.currentUser.cityId,this.isCity=!0,this.hospitalService.getHosByCityId(this.currentUser.cityId).subscribe(r=>{this.lstHospitals=r,this.searchObj.hospitalId=this.currentUser.hospitalId,this.isHospital=!0,this.assetDetailService.GetListOfAssetDetailsByHospitalId(this.currentUser.hospitalId).subscribe(i=>{this.lstHospitalAssets=i})}))}))}),this.organizationService.GetOrganizations().subscribe(t=>{this.lstOrganizations=t}),this.hospitalService.GetHospitalById(this.currentUser.hospitalId).subscribe(t=>{this.searchObj.organizationId=t.organizationId,this.isOrg=!0,this.subOrganizationService.GetSubOrganizationByOrgId(this.searchObj.organizationId).subscribe(s=>{this.lstSubOrganizations=s}),this.searchObj.subOrganizationId=t.subOrganizationId,this.isSubOrg=!0})):this.currentUser.governorateId>0&&0==this.currentUser.cityId&&0==this.currentUser.hospitalId?(this.governorateService.GetGovernorates().subscribe(t=>{this.lstGovernorates=t,this.currentUser.governorateId>0&&(this.searchObj.governorateId=this.currentUser.governorateId,this.isGov=!0,this.cityService.GetCitiesByGovernorateId(this.currentUser.governorateId).subscribe(s=>{this.lstCities=s}))}),this.organizationService.GetOrganizations().subscribe(t=>{this.lstOrganizations=t})):this.currentUser.governorateId>0&&this.currentUser.cityId>0&&0==this.currentUser.hospitalId?(this.governorateService.GetGovernorates().subscribe(t=>{this.lstGovernorates=t,this.currentUser.governorateId>0&&(this.searchObj.governorateId=this.currentUser.governorateId,this.isGov=!0,this.cityService.GetCitiesByGovernorateId(this.currentUser.governorateId).subscribe(s=>{this.lstCities=s,this.searchObj.cityId=this.currentUser.cityId,this.isCity=!0}))}),this.organizationService.GetOrganizations().subscribe(t=>{this.lstOrganizations=t})):0==this.currentUser.hospitalId&&this.currentUser.organizationId>0&&0==this.currentUser.subOrganizationId?(this.organizationService.GetOrganizations().subscribe(t=>{this.lstOrganizations=t,this.currentUser.organizationId>0&&(this.searchObj.organizationId=this.currentUser.organizationId,this.isOrg=!0,this.subOrganizationService.GetSubOrganizationByOrgId(this.currentUser.organizationId).subscribe(s=>{this.lstSubOrganizations=s,this.currentUser.subOrganizationId>0&&(this.searchObj.subOrganizationId=this.currentUser.subOrganizationId)}))}),this.governorateService.GetGovernorates().subscribe(t=>{this.lstGovernorates=t})):0==this.currentUser.hospitalId&&this.currentUser.organizationId>0&&this.currentUser.subOrganizationId>0?(this.organizationService.GetOrganizations().subscribe(t=>{this.lstOrganizations=t,this.currentUser.organizationId>0&&(this.searchObj.organizationId=this.currentUser.organizationId,this.isOrg=!0,this.subOrganizationService.GetSubOrganizationByOrgId(this.currentUser.organizationId).subscribe(s=>{this.lstSubOrganizations=s,this.currentUser.subOrganizationId>0&&(this.searchObj.subOrganizationId=this.currentUser.subOrganizationId,this.isSubOrg=!0,this.hospitalService.GetHospitalsBySubOrganizationId(this.currentUser.subOrganizationId).subscribe(r=>{this.lstHospitals=r,this.searchObj.hospitalId=this.currentUser.hospitalId,this.assetDetailService.GetListOfAssetDetailsByHospitalId(this.currentUser.hospitalId).subscribe(i=>{this.lstHospitalAssets=i})}))}))}),this.governorateService.GetGovernorates().subscribe(t=>{this.lstGovernorates=t})):0==this.currentUser.hospitalId&&0==this.currentUser.organizationId&&0==this.currentUser.subOrganizationId&&0==this.currentUser.governorateId&&0==this.currentUser.cityId&&(this.organizationService.GetOrganizations().subscribe(t=>{this.lstOrganizations=t}),this.governorateService.GetGovernorates().subscribe(t=>{this.lstGovernorates=t}))}clicktbl(t){this.page.pagenumber=(t.first+10)/10,this.page.pagesize=t.rows,this.sortFilterObjects.searchObj.userId=this.currentUser.id,this.scrapService.ListScraps(this.page.pagenumber,this.page.pagesize,this.sortFilterObjects).subscribe(s=>{this.lstScraps=s.results,this.count=s.count})}sort(t){"descending"===this.sortStatus?(this.sortStatus="ascending",this.sortFilterObjects.sortObj.sortStatus=this.sortStatus):(this.sortStatus="descending",this.sortFilterObjects.sortObj.sortStatus=this.sortStatus),this.sortFilterObjects.sortObj.sortBy=t.currentTarget.id,this.sortFilterObjects.searchObj.userId=this.currentUser.id,this.scrapService.ListScraps(this.page.pagenumber,this.page.pagesize,this.sortFilterObjects).subscribe(s=>{this.lstScraps=s.results,this.count=s.count})}reload(){let t=this.router.url;this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload",this.router.navigate([t])}reset(){this.reload()}viewScrap(t){this.dialogService.open(he,{header:"en"==this.lang?"View Scrap":"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062c\u0647\u0627\u0632 \u0627\u0644\u0645\u0643\u0647\u0646",width:"50%",data:{id:t},style:{dir:"en"==this.lang?"ltr":"rtl","text-align":"en"==this.lang?"left":"right",direction:"en"==this.lang?"ltr":"rtl"}}).onClose.subscribe(r=>{this.reload()})}deleteScrap(t){this.scrapService.GetScrapById(t).subscribe(s=>{this.selectedObj=s,this.dialog.open(ge,{width:"30%",autoFocus:!0,data:{id:this.selectedObj.id}}).afterClosed().subscribe(i=>{this.reload()})})}onSearch(){console.log("this.sortFilterObjects",this.sortFilterObjects),this.sortFilterObjects.searchObj.startDate2=this.datePipe.transform(this.sortFilterObjects.searchObj.scrapStartDate.toString(),"MM-dd-yyyy"),this.sortFilterObjects.searchObj.endDate2=this.datePipe.transform(this.sortFilterObjects.searchObj.scrapEndDate.toString(),"MM-dd-yyyy"),this.scrapService.ListScraps(this.page.pagenumber,this.page.pagesize,this.sortFilterObjects).subscribe(t=>{this.lstScraps=t.results,this.count=t.count})}getSubOrgByOrgId(t){this.subOrganizationService.GetSubOrganizationByOrgId(t.target.value).subscribe(s=>{this.lstSubOrganizations=s})}getCitiesByGovId(t){this.cityService.GetCitiesByGovernorateId(t.target.value).subscribe(s=>{this.lstCities=s})}getAssetsByHospitalId(t){this.masterAssetService.GetMasterAssets().subscribe(s=>{this.lstMasterAssets=s})}getHospitalsBySubOrgId(t){this.hospitalService.GetHospitalsBySubOrganizationId(t.target.value).subscribe(s=>{this.lstHospitals=s})}getStartDate(t){this.searchObj.startDate2=this.datePipe.transform(t,"yyyy-MM-dd")}getEndDate(t){this.searchObj.endDate2=this.datePipe.transform(t,"yyyy-MM-dd")}onMasterSelectionChanged(t){this.masterAssetService.AutoCompleteMasterAssetName2(t.query).subscribe(s=>{this.lstMasterAssets=s,this.lstMasterAssets.forEach("en"==this.lang?r=>r.master=r.name+" - "+r.brandName+" - "+r.model:r=>r.master=r.nameAr+" - "+r.brandNameAr+" - "+r.model)})}getMasterObject(t){this.searchObj.masterAssetId=t.id}getBarCode(t){this.searchObj.barCode=t.barCode}onSelectionChanged(t){0!=this.currentUser.hospitalId&&this.assetDetailService.AutoCompleteAssetBarCode(t.query,this.currentUser.hospitalId).subscribe(s=>{this.lstassetDetailBarcodes=s,this.lstassetDetailBarcodes.forEach(r=>r.name=r.barCode)}),0!=this.searchObj.hospitalId?this.assetDetailService.AutoCompleteAssetBarCode(t.query,this.searchObj.hospitalId).subscribe(s=>{this.lstassetDetailBarcodes=s,this.lstassetDetailBarcodes.forEach(r=>r.name=r.barCode)}):this.assetDetailService.AutoCompleteAssetBarCode(t.query,this.currentUser.hospitalId).subscribe(s=>{this.lstassetDetailBarcodes=s,this.lstassetDetailBarcodes.forEach(r=>r.name=r.barCode)})}getSerialNumber(t){this.searchObj.serialNumber=t.serialNumber}onSerialNumberSelectionChanged(t){0!=this.currentUser.hospitalId&&this.assetDetailService.AutoCompleteAssetSerial(t.query,this.currentUser.hospitalId).subscribe(s=>{this.lstAssetSerailNumberObj=s,this.lstAssetSerailNumberObj.forEach(r=>r.serialNumber=r.serialNumber)}),0!=this.searchObj.hospitalId?this.assetDetailService.AutoCompleteAssetSerial(t.query,this.searchObj.hospitalId).subscribe(s=>{this.lstAssetSerailNumberObj=s,this.lstAssetSerailNumberObj.forEach(r=>r.name=r.serialNumber)}):this.assetDetailService.AutoCompleteAssetSerial(t.query,this.currentUser.hospitalId).subscribe(s=>{this.lstAssetSerailNumberObj=s,this.lstAssetSerailNumberObj.forEach(r=>r.name=r.serialNumber)})}clearAssetSerailNumber(){this.searchObj.serialNumber="",this.assetSerailNumberObj.serialNumber=""}clearAssetBarCode(){this.searchObj.barCode="",this.assetBarCodeObj.barCode=""}generatePDF(){this.lstCheckedScraps.length>0&&this.scrapService.CreateScrapCheckedPDF(this.lstCheckedScraps).subscribe(t=>{this.lstScraps=t;let s="CreateScrapCheckedReport.pdf";var r=`${c.N.Domain}UploadedAttachments/`;this.uploadService.downloadCheckedScrapPDF(s).subscribe(i=>{window.open(r+"ScrapReports/"+s),this.scrapService.GetAllScrapsWithPaging(this.page.pagenumber,this.page.pagesize).subscribe(d=>{this.lstScraps=d.results,this.count=d.count})})}),0==this.lstCheckedScraps.length&&(this.searchObj.lang=this.lang,this.searchObj.printedBy=this.currentUser.userName,this.searchObj.hospitalNameAr=this.currentUser.hospitalNameAr,this.searchObj.hospitalName=this.currentUser.hospitalName,this.scrapService.getSearchPDFForScraps(this.searchObj).subscribe(t=>{this.lstScraps=t;let s="ScrapReportPDF.pdf";var r=`${c.N.Domain}UploadedAttachments/`;this.uploadService.downloadScrapPDF(s).subscribe(i=>{window.open(r+"ScrapReports/"+s),this.scrapService.GetAllScrapsWithPaging(this.page.pagenumber,this.page.pagesize).subscribe(d=>{this.lstScraps=d.results,this.count=d.count})})}))}checkedScraps(t,s){if(t.checked)this.lstScrapIds.push(s),this.scrapService.SelectedScrapById(s).subscribe(i=>{this.checkedScrapObj=i,i.lang=this.lang,i.printedBy=this.currentUser.userName,i.hospitalNameAr=this.currentUser.hospitalNameAr,i.hospitalName=this.currentUser.hospitalName,this.lstCheckedScraps.push(this.checkedScrapObj)});else{var r=this.lstScrapIds.indexOf(s);this.lstScrapIds.splice(r,1);for(let i=0;i<this.lstCheckedScraps.length;i++)s=this.lstCheckedScraps[i].id,this.lstCheckedScraps.splice(r,1)}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(G.$),e.Y36(u.F0),e.Y36(b.xA),e.Y36(C),e.Y36(O.uw),e.Y36(w.D),e.Y36(me.y),e.Y36(be.Z),e.Y36(H.$),e.Y36(Ae.M),e.Y36(Ze.c),e.Y36(_e.n),e.Y36(fe.a),e.Y36(N.X),e.Y36(h.uU),e.Y36(Se.p),e.Y36(Ce.b),e.Y36(ve.c),e.Y36(u.gz),e.Y36(Oe.p))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-list"]],decls:128,vars:98,consts:[[1,"col-12"],[1,"row","top-buffer"],[1,"col-7"],[1,"card-title"],[1,"col-1"],["pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],[1,"col-2"],[1,"addbutton",3,"routerLink"],[1,"fa-solid","fa-plus"],["data-toggle","collapse","href","#collapseExample","role","button","aria-expanded","true","aria-controls","collapseExample",1,"filterbutton"],[1,"fa-solid","fa-filter"],["id","collapseExample",1,"collapse","row","card-filter"],[3,"ngSubmit"],["searchForm","ngForm"],["for","governorate",3,"translate"],["id","governorate","name","governorate",1,"form-control",3,"disabled","value","ngModel","ngModelChange","change"],["governorateId","ngModel"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["for","cityId",3,"translate"],["id","city","name","cityId",1,"form-control",3,"ngModel","disabled","ngModelChange"],["cityId","ngModel"],["for","organization",3,"translate"],["id","organization","name","organization",1,"form-control",3,"disabled","ngModel","value","ngModelChange","change"],["id","suborganization","name","suborganization",1,"form-control",3,"value","disabled","ngModel","change","ngModelChange"],["suborganization","ngModel"],["for","hospitalId",3,"translate"],["id","hospitalId","name","hospitalId",1,"form-control",3,"disabled","ngModel","value","ngModelChange","change"],["for","assettId",3,"translate"],["type","search","name","masterAssetId","id","masterAssetId","field","master","appendTo","body",3,"suggestions","dropdown","completeMethod","onSelect"],["pTemplate","item"],["pTemplate","selectedItem"],["for","barcode",3,"translate"],["type","search","name","barcode","id","barcode","autoWidth","true","field","name","showClear","true",3,"ngModel","ngModelOptions","suggestions","dropdown","ngModelChange","completeMethod","onSelect"],["for","serial",3,"translate"],["name","serial","id","serial","autoWidth","true","field","serialNumber","showClear","true",3,"ngModel","ngModelOptions","suggestions","dropdown","ngModelChange","completeMethod","onSelect"],["for","modelNumber",3,"translate"],["type","text","id","model","name","model",1,"form-control",3,"ngModel","ngModelChange"],["for","orginId",3,"translate"],["id","orginId","name","orginId",1,"form-control",3,"ngModel","value","ngModelChange"],["for","supplierId",3,"translate"],["id","supplierId","name","supplierId",1,"form-control",3,"ngModel","value","ngModelChange"],["for","brandId",3,"translate"],["id","brandId","name","brandId",1,"form-control",3,"ngModel","value","ngModelChange"],["for","departmentId",3,"translate"],["id","departmentId","name","departmentId",1,"form-control",3,"ngModel","value","ngModelChange"],["for","scrapStartDate"],["name","scrapStartDate","yearRange","1900:2030","inputId","scrapStartDate","appendTo","body","showButtonBar","true",3,"ngModel","showIcon","yearNavigator","monthNavigator","ngModelOptions","ngModelChange","onSelect"],["for","scrapEndDate"],["name","scrapEndDate","yearRange","1900:2030","inputId","scrapEndDate","appendTo","body","showButtonBar","true",3,"ngModel","showIcon","yearNavigator","monthNavigator","ngModelChange","onSelect"],[1,"col-4"],["value","save","type","submit",1,"btn","searchIcon"],[1,"fa-solid","fa-magnifying-glass","fa-2xl"],["value","Reset","type","button",1,"btn","reset",3,"click"],[1,"fa-solid","fa-circle-xmark","fa-2xl"],[1,"row"],["name","scrapTbl","styleClass","p-datatable-striped p-datatable-sm p-datatable-gridlines","responsiveLayout","scroll","pageLinks","10",3,"value","paginator","lazy","rows","totalRecords","rowHover","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["appendTo","body","modal","true",3,"visible","visibleChange"],[2,"color","rgb(181, 4, 4)"],[2,"color","rgb(181, 4, 4)","font-weight","bold"],[3,"value"],[2,"text-align","inherit",3,"sortable"],[3,"id","click"],[2,"text-align","inherit"],[3,"id","name","value","change"],[2,"text-decoration","underline",3,"routerLink"],[1,"viewIcon",3,"click"],[1,"fa-solid","fa-eye"],[1,"deleteIcon",3,"click"],[1,"fa-solid","fa-trash"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h4",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"button",5),e.NdJ("click",function(){return s.generatePDF()}),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"a",7),e._UZ(10,"i",8),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"a",9),e._UZ(15,"i",10),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",0),e.TgZ(19,"div",11),e.TgZ(20,"form",12,13),e.NdJ("ngSubmit",function(){return s.onSearch()}),e.TgZ(22,"div",1),e.TgZ(23,"div",6),e.TgZ(24,"label",14),e._uU(25,"Governorate"),e.qZA(),e.TgZ(26,"select",15,16),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.governorateId=i})("change",function(i){return s.getCitiesByGovId(i)}),e._UZ(28,"option",17),e.YNc(29,Ie,2,2,"option",18),e.qZA(),e.qZA(),e.TgZ(30,"div",6),e.TgZ(31,"label",19),e._uU(32,"City"),e.qZA(),e.TgZ(33,"select",20,21),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.cityId=i}),e._UZ(35,"option",17),e.YNc(36,Ne,2,2,"option",18),e.qZA(),e.qZA(),e.TgZ(37,"div",6),e.TgZ(38,"label",22),e._uU(39,"Organization"),e.qZA(),e.TgZ(40,"select",23),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.organizationId=i})("change",function(i){return s.getSubOrgByOrgId(i)}),e._UZ(41,"option",17),e.YNc(42,je,2,2,"option",18),e.qZA(),e.qZA(),e.TgZ(43,"div",6),e.TgZ(44,"label",22),e._uU(45,"Sub Organization"),e.qZA(),e.TgZ(46,"select",24,25),e.NdJ("change",function(i){return s.getHospitalsBySubOrgId(i)})("ngModelChange",function(i){return s.sortFilterObjects.searchObj.subOrganizationId=i}),e._UZ(48,"option",17),e.YNc(49,Me,2,2,"option",18),e.qZA(),e.qZA(),e.TgZ(50,"div",6),e.TgZ(51,"label",26),e._uU(52,"Hospitals"),e.qZA(),e.TgZ(53,"select",27),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.hospitalId=i})("change",function(i){return s.getAssetsByHospitalId(i)}),e._UZ(54,"option",17),e.YNc(55,ye,2,2,"option",18),e.qZA(),e.qZA(),e.TgZ(56,"div",6),e._UZ(57,"label",28),e.TgZ(58,"p-autoComplete",29),e.NdJ("completeMethod",function(i){return s.onMasterSelectionChanged(i)})("onSelect",function(i){return s.getMasterObject(i)}),e.YNc(59,Ue,1,3,"ng-template",30),e.YNc(60,qe,1,3,"ng-template",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",1),e.TgZ(62,"div",6),e._UZ(63,"label",32),e.TgZ(64,"p-autoComplete",33),e.NdJ("ngModelChange",function(i){return s.assetBarCodeObj=i})("completeMethod",function(i){return s.onSelectionChanged(i)})("onSelect",function(i){return s.getBarCode(i)}),e.YNc(65,De,1,1,"ng-template",30),e.YNc(66,xe,1,1,"ng-template",31),e.qZA(),e.qZA(),e.TgZ(67,"div",6),e._UZ(68,"label",34),e.TgZ(69,"p-autoComplete",35),e.NdJ("ngModelChange",function(i){return s.assetSerailNumberObj=i})("completeMethod",function(i){return s.onSerialNumberSelectionChanged(i)})("onSelect",function(i){return s.getSerialNumber(i)}),e.YNc(70,Be,1,1,"ng-template",30),e.YNc(71,Le,1,1,"ng-template",31),e.qZA(),e.qZA(),e.TgZ(72,"div",6),e._UZ(73,"label",36),e.TgZ(74,"input",37),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.modelNumber=i}),e.qZA(),e.qZA(),e.TgZ(75,"div",6),e.TgZ(76,"label",38),e._uU(77,"Origins"),e.qZA(),e.TgZ(78,"select",39),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.originId=i}),e._UZ(79,"option",17),e.YNc(80,Je,2,2,"option",18),e.qZA(),e.qZA(),e.TgZ(81,"div",6),e.TgZ(82,"label",40),e._uU(83,"Suppliers"),e.qZA(),e.TgZ(84,"select",41),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.supplierId=i}),e._UZ(85,"option",17),e.YNc(86,Fe,2,2,"option",18),e.qZA(),e.qZA(),e.TgZ(87,"div",6),e.TgZ(88,"label",42),e._uU(89,"Brands"),e.qZA(),e.TgZ(90,"select",43),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.brandId=i}),e._UZ(91,"option",17),e.YNc(92,ze,2,2,"option",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(93,"div",1),e.TgZ(94,"div",6),e.TgZ(95,"label",44),e._uU(96,"Departments"),e.qZA(),e.TgZ(97,"select",45),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.departmentId=i}),e._UZ(98,"option",17),e.YNc(99,Ge,2,2,"option",18),e.qZA(),e.qZA(),e.TgZ(100,"div",6),e.TgZ(101,"label",46),e._uU(102),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"p-calendar",47),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.scrapStartDate=i})("onSelect",function(i){return s.getStartDate(i)}),e.qZA(),e.qZA(),e.TgZ(105,"div",6),e.TgZ(106,"label",48),e._uU(107),e.ALo(108,"translate"),e.qZA(),e.TgZ(109,"p-calendar",49),e.NdJ("ngModelChange",function(i){return s.sortFilterObjects.searchObj.scrapEndDate=i})("onSelect",function(i){return s.getEndDate(i)}),e.qZA(),e.qZA(),e._UZ(110,"div",50),e.TgZ(111,"div",4),e.TgZ(112,"button",51),e._UZ(113,"i",52),e.qZA(),e.qZA(),e.TgZ(114,"div",4),e.TgZ(115,"button",53),e.NdJ("click",function(){return s.reset()}),e._UZ(116,"i",54),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(117,"div",55),e.TgZ(118,"div",0),e.TgZ(119,"p-table",56),e.NdJ("onLazyLoad",function(i){return s.clicktbl(i)}),e.YNc(120,we,43,53,"ng-template",57),e.YNc(121,Qe,26,17,"ng-template",58),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(122,"p-dialog",59),e.NdJ("visibleChange",function(i){return s.errorDisplay=i}),e.TgZ(123,"p-header",60),e._uU(124),e.ALo(125,"translate"),e.qZA(),e.TgZ(126,"span",61),e._uU(127),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij(" ",e.lcZ(5,81,"Asset.Scrap"),""),e.xp6(5),e.Q6J("routerLink",e.DdM(93,Ye)),e.xp6(2),e.Oqu(e.lcZ(12,83,"Asset.Create")),e.xp6(5),e.hij(" ",e.lcZ(17,85,"Asset.Filter"),""),e.xp6(8),e.Q6J("translate","Asset.Governorates"),e.xp6(2),e.Q6J("disabled",s.isGov)("value",0)("ngModel",s.sortFilterObjects.searchObj.governorateId),e.xp6(3),e.Q6J("ngForOf",s.lstGovernorates),e.xp6(2),e.Q6J("translate","Asset.Cities"),e.xp6(2),e.Q6J("ngModel",s.sortFilterObjects.searchObj.cityId)("disabled",s.isCity),e.xp6(3),e.Q6J("ngForOf",s.lstCities),e.xp6(2),e.Q6J("translate","Asset.Organizations"),e.xp6(2),e.Q6J("disabled",s.isOrg)("ngModel",s.sortFilterObjects.searchObj.organizationId)("value",0),e.xp6(2),e.Q6J("ngForOf",s.lstOrganizations),e.xp6(2),e.Q6J("translate","Asset.SubOrganizations"),e.xp6(2),e.Q6J("value",0)("disabled",s.isSubOrg)("ngModel",s.sortFilterObjects.searchObj.subOrganizationId),e.xp6(3),e.Q6J("ngForOf",s.lstSubOrganizations),e.xp6(2),e.Q6J("translate","Asset.Hospitals"),e.xp6(2),e.Q6J("disabled",s.isHospital)("ngModel",s.sortFilterObjects.searchObj.hospitalId)("value",0),e.xp6(2),e.Q6J("ngForOf",s.lstHospitals),e.xp6(2),e.Q6J("translate","Asset.Name"),e.xp6(1),e.Q6J("suggestions",s.lstMasterAssets)("dropdown",!1),e.xp6(5),e.Q6J("translate","Asset.Barcode"),e.xp6(1),e.Q6J("ngModel",s.assetBarCodeObj)("ngModelOptions",e.DdM(94,D))("suggestions",s.lstassetDetailBarcodes)("dropdown",!1),e.xp6(4),e.Q6J("translate","Asset.Serial"),e.xp6(1),e.Q6J("ngModel",s.assetSerailNumberObj)("ngModelOptions",e.DdM(95,D))("suggestions",s.lstAssetSerailNumberObj)("dropdown",!1),e.xp6(4),e.Q6J("translate","Asset.Model"),e.xp6(1),e.Q6J("ngModel",s.sortFilterObjects.searchObj.modelNumber),e.xp6(2),e.Q6J("translate","Asset.Origins"),e.xp6(2),e.Q6J("ngModel",s.sortFilterObjects.searchObj.originId)("value",0),e.xp6(2),e.Q6J("ngForOf",s.lstOrigins),e.xp6(2),e.Q6J("translate","Asset.Suppliers"),e.xp6(2),e.Q6J("ngModel",s.sortFilterObjects.searchObj.supplierId)("value",0),e.xp6(2),e.Q6J("ngForOf",s.lstSuppliers),e.xp6(2),e.Q6J("translate","Asset.Brands"),e.xp6(2),e.Q6J("ngModel",s.sortFilterObjects.searchObj.brandId)("value",0),e.xp6(2),e.Q6J("ngForOf",s.lstBrands),e.xp6(3),e.Q6J("translate","Asset.Departments"),e.xp6(2),e.Q6J("ngModel",s.sortFilterObjects.searchObj.departmentId)("value",0),e.xp6(2),e.Q6J("ngForOf",s.lstDepartments),e.xp6(3),e.Oqu(e.lcZ(103,87,"Asset.From")),e.xp6(2),e.Q6J("ngModel",s.sortFilterObjects.searchObj.scrapStartDate)("showIcon",!0)("yearNavigator",!0)("monthNavigator",!0)("ngModelOptions",e.DdM(96,D)),e.xp6(3),e.Oqu(e.lcZ(108,89,"Asset.To")),e.xp6(2),e.Q6J("ngModel",s.sortFilterObjects.searchObj.scrapEndDate)("showIcon",!0)("yearNavigator",!0)("monthNavigator",!0),e.xp6(10),e.Q6J("value",s.lstScraps)("paginator",!0)("lazy",!0)("rows",10)("totalRecords",s.count)("rowHover",!0),e.xp6(3),e.Akn(e.DdM(97,$e)),e.Q6J("visible",s.errorDisplay),e.xp6(2),e.hij(" ",e.lcZ(125,91,"Asset.Error")," "),e.xp6(3),e.hij(" ",s.errorMessage,""))},directives:[Te.Hq,U.u,u.yS,p._Y,p.JL,p.F,m.Pi,p.EJ,p.JJ,p.On,p.YN,p.Kr,h.sg,M.Qc,Z.jx,p.Fj,j.f,q.iA,v.V,Z.h4,q.fz,y.oG],pipes:[m.X$,h.uU],styles:[""]}),a})(),data:{breadcrumb:"Asset.Scrap"}},{path:"AddScrap",component:le,data:{breadcrumb:"Asset.Create"}}];let Ee=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[u.Bz.forChild(Re)],u.Bz]}),a})();var Pe=o(81749),ke=o(89606),Ve=o(40859),We=o(46833),Xe=o(12895),Ke=o(50103),et=o(46113),tt=o(34942),st=o(4714),rt=o(17988),at=o(2895),it=o(27965),nt=o(85490),ot=o(34814),lt=o(6639),ct=o(49356),dt=o(43335),pt=o(72742),ht=o(36949),ut=o(80014),gt=o(19361);let mt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[gt.F,h.ez,Ee,q.U$,m.aw,Ve.Nh,O.Is,U.z,v.S,We.lN,et.c,Xe.FA,Ke.kW,j._8,M.WN,Pe.B,ke.T5,y.p9,p.UX,Y.ZX,tt.f,st.ON,rt.T,at.ot,it.EV,nt.To,ot.DashboardModule,b.DL,lt.U,ct.Ps,dt.g,pt.Fk,ht.q4,ut.L]]}),a})()}}]);