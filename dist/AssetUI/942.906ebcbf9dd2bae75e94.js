"use strict";(self.webpackChunkasset_ui=self.webpackChunkasset_ui||[]).push([[942],{15942:(G,A,a)=>{a.r(A),a.d(A,{RolesModule:()=>z});var c=a(12057),p=a(68305),n=a(24751),e=a(74788),m=a(47521),Z=a(16904),g=a(75629),f=a(99287),C=a(45121),v=a(33013);function _(r,s){if(1&r&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}const y=function(){return{width:"350px"}};let T=(()=>{class r{constructor(t,o,l,i){this.roleService=t,this.rolecategoryService=o,this.route=l,this.formBuilder=i,this.lang=localStorage.getItem("lang"),this.lstRoleCategories=[],this.errorDisplay=!1,this.roleObj={name:"",displayName:"",roleCategoryId:0},this.form=this.formBuilder.group({name:[null,n.kI.required],displayName:[null,n.kI.required]})}ngOnInit(){this.rolecategoryService.GetRoleCategories().subscribe(t=>{this.lstRoleCategories=t})}changeRoleCategoryId(t){this.roleObj.roleCategoryId=Number(t.target.value)}onSubmit(){if(0==this.roleObj.roleCategoryId){if("en"==this.lang)return this.errorDisplay=!0,this.errorMessage="Please select category",!1;if("ar"==this.lang)return this.errorDisplay=!0,this.errorMessage="\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u0641\u0626\u0629",!1}else this.roleService.AddRole(this.roleObj).subscribe(t=>{this.route.navigate(["/dash/roles"])})}reset(){this.roleObj={name:"",roleCategoryId:0,displayName:""}}back(){this.route.navigate(["/dash/roles"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.N),e.Y36(Z.X),e.Y36(p.F0),e.Y36(n.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create"]],decls:29,vars:28,consts:[[1,"col-12"],[1,"card-body"],[1,"form-horizontal",3,"ngSubmit"],["form","ngForm"],[1,"row","top-buffer"],[1,"col-4"],["for","name",3,"translate"],["name","roleCategoryId","id","roleCategoryId",1,"form-control","ng-dirty","ng-invalid","p-mr-2",3,"value","ngModel","change","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["for","name",1,"control-label","required",3,"translate"],["type","text","pTooltip","Enter  name","tooltipPosition","bottom","id","name","name","name","autofocus","","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["type","text","pTooltip","Enter display name","tooltipPosition","bottom","id","displayName","name","displayName","autofocus","","required","",1,"form-control",3,"ngModel","ngModelChange"],["displayName","ngModel"],[1,"col-12","text-center"],["value","save",1,"btn","btn-success",3,"click"],["appendTo","body","modal","true",3,"visible","visibleChange"],[2,"color","rgb(181, 4, 4)"],[2,"color","rgb(181, 4, 4)","font-weight","bold"],[3,"value"]],template:function(t,o){if(1&t){const l=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"form",2,3),e.NdJ("ngSubmit",function(){return e.CHM(l),e.MAs(3).valid}),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e._UZ(6,"label",6),e.TgZ(7,"select",7),e.NdJ("change",function(d){return o.changeRoleCategoryId(d)})("ngModelChange",function(d){return o.roleObj.roleCategoryId=d}),e._UZ(8,"option",8),e.YNc(9,_,2,2,"option",9),e.qZA(),e.qZA(),e.TgZ(10,"div",5),e._UZ(11,"label",10),e.TgZ(12,"input",11,12),e.NdJ("ngModelChange",function(d){return o.roleObj.name=d}),e.qZA(),e.qZA(),e.TgZ(14,"div",5),e._UZ(15,"label",10),e.TgZ(16,"input",13,14),e.NdJ("ngModelChange",function(d){return o.roleObj.displayName=d}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",4),e.TgZ(19,"div",15),e.TgZ(20,"button",16),e.NdJ("click",function(){return o.onSubmit()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"p-dialog",17),e.NdJ("visibleChange",function(d){return o.errorDisplay=d}),e.TgZ(24,"p-header",18),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"span",19),e._uU(28),e.qZA(),e.qZA()}if(2&t){const l=e.MAs(3),i=e.MAs(13),d=e.MAs(17);e.xp6(6),e.Q6J("translate","Asset.RoleCategory"),e.xp6(1),e.Q6J("value",0)("value",0)("ngModel",o.roleObj.roleCategoryId),e.xp6(2),e.Q6J("ngForOf",o.lstRoleCategories),e.xp6(2),e.Q6J("translate","Asset.Name"),e.xp6(1),e.ekj("is-invalid",i.touched&&i.errors||i.untouched&&i.errors||l.submitted)("is-valid",i.valid&&l.submitted),e.Q6J("ngModel",o.roleObj.name),e.xp6(3),e.Q6J("translate","Asset.DisplayName"),e.xp6(1),e.ekj("is-invalid",d.touched&&d.errors||d.untouched&&d.errors||l.submitted)("is-valid",d.valid&&l.submitted),e.Q6J("ngModel",o.roleObj.displayName),e.xp6(5),e.hij(" ",e.lcZ(22,23,"Asset.Save")," "),e.xp6(2),e.Akn(e.DdM(27,y)),e.Q6J("visible",o.errorDisplay),e.xp6(2),e.hij(" ",e.lcZ(26,25,"Asset.Error")," "),e.xp6(3),e.hij(" ",o.errorMessage,"")}},directives:[n._Y,n.JL,n.F,g.Pi,n.EJ,n.JJ,n.On,n.YN,n.Kr,c.sg,n.Fj,f.u,n.Q7,C.V,v.h4],pipes:[g.X$],styles:[""]}),r})();function q(r,s){if(1&r&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&r){const t=s.$implicit,o=e.oxw();e.Q6J("value",t.id)("selected",t.id==o.roleObj.roleCategoryId),e.xp6(1),e.hij(" ",t.name," ")}}function N(r,s){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"span",10),e._uU(2," Name is required"),e.qZA(),e.qZA())}function M(r,s){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"span",10),e._uU(2,"Arabic Name is required"),e.qZA(),e.qZA())}const R=function(){return{width:"350px"}};let x=(()=>{class r{constructor(t,o,l,i,d){this.roleService=t,this.rolecategoryService=o,this.route=l,this.activeRoute=i,this.formBuilder=d,this.lang=localStorage.getItem("lang"),this.lstRoleCategories=[],this.errorDisplay=!1}ngOnInit(){this.rolecategoryService.GetRoleCategories().subscribe(o=>{this.lstRoleCategories=o}),this.roleObj={name:"",displayName:"",id:"",roleCategoryId:0},this.frm=this.formBuilder.group({name:["",n.kI.required],displayName:["",n.kI.required]}),this.roleService.GetRoleById(this.activeRoute.snapshot.params.roleId).subscribe(o=>{this.roleObj=o},o=>console.log(o))}changeRoleCategoryId(t){this.roleObj.roleCategoryId=Number(t.target.value)}onSubmit(){if(0==this.roleObj.roleCategoryId){if("en"==this.lang)return this.errorDisplay=!0,this.errorMessage="Please select category",!1;if("ar"==this.lang)return this.errorDisplay=!0,this.errorMessage="\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u0641\u0626\u0629",!1}else this.frm.valid&&this.roleService.UpdateRole(this.roleObj).subscribe(()=>{this.route.navigate(["/dash/roles"])})}reset(){this.roleObj={name:"",displayName:"",id:"",roleCategoryId:0}}back(){this.route.navigate(["/dash/roles"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.N),e.Y36(Z.X),e.Y36(p.F0),e.Y36(p.gz),e.Y36(n.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit"]],decls:38,vars:35,consts:[[1,"card"],[1,"card-header","cardHeader"],[1,"card-title",2,"font-size","30px","color","#1683c2","font-weight","bold"],[1,"card-body"],[3,"formGroup"],[1,"form-group"],["for","name",3,"translate"],["name","roleCategoryId","id","roleCategoryId",1,"form-control","ng-dirty","ng-invalid","p-mr-2",3,"value","ngModel","change","ngModelChange"],["value","0"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"text-danger",2,"font-size","10px","font-weight","bold"],["type","text","formControlName","name","placeholder","Enter name","autofocus","","required","",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","text","formControlName","displayName","placeholder","Enter displayName","autofocus","","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","Save","type","button",1,"btn","btn-primary","pull-center","btn-sm",2,"margin","0px 5px","background-color","#1483c2","border-color","#1483c2",3,"click"],[1,"btn","btn-primary","pull-center","btn-sm",2,"margin","0px 5px","background-color","#7e8083 !important","border-color","#7e8083",3,"click"],["appendTo","body","modal","true",3,"visible","visibleChange"],[2,"color","rgb(181, 4, 4)"],[2,"color","rgb(181, 4, 4)","font-weight","bold"],[3,"value","selected"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h4",2),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"form",4),e.TgZ(8,"div",5),e._UZ(9,"label",6),e.TgZ(10,"select",7),e.NdJ("change",function(i){return o.changeRoleCategoryId(i)})("ngModelChange",function(i){return o.roleObj.roleCategoryId=i}),e.TgZ(11,"option",8),e._uU(12),e.ALo(13,"translate"),e.ALo(14,"translate"),e.qZA(),e.YNc(15,q,2,3,"option",9),e.qZA(),e._UZ(16,"label",6),e.TgZ(17,"span",10),e._uU(18,"*"),e.qZA(),e.TgZ(19,"input",11),e.NdJ("ngModelChange",function(i){return o.roleObj.name=i}),e.qZA(),e.YNc(20,N,3,0,"div",12),e.qZA(),e.TgZ(21,"div",5),e._UZ(22,"label",6),e.TgZ(23,"span",10),e._uU(24,"*"),e.qZA(),e.TgZ(25,"input",13),e.NdJ("ngModelChange",function(i){return o.roleObj.displayName=i}),e.qZA(),e.YNc(26,M,3,0,"div",12),e.qZA(),e.TgZ(27,"button",14),e.NdJ("click",function(){return o.onSubmit()}),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"button",15),e.NdJ("click",function(){return o.back()}),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"p-dialog",16),e.NdJ("visibleChange",function(i){return o.errorDisplay=i}),e.TgZ(34,"p-header",17),e._uU(35," [translate]=\"'Asset.Error'\" "),e.qZA(),e.TgZ(36,"span",18),e._uU(37),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.AsE(" ",e.lcZ(4,22,"Asset.Edit")," ",e.lcZ(5,24,"Asset.Role")," "),e.xp6(4),e.Q6J("formGroup",o.frm),e.xp6(2),e.Q6J("translate","Asset.RoleCategory"),e.xp6(1),e.Q6J("value",0)("value",0)("ngModel",o.roleObj.roleCategoryId),e.xp6(2),e.AsE("",e.lcZ(13,26,"Asset.Select")," ",e.lcZ(14,28,"Asset.Role"),""),e.xp6(3),e.Q6J("ngForOf",o.lstRoleCategories),e.xp6(1),e.Q6J("translate","Asset.Name"),e.xp6(3),e.Q6J("ngModel",o.roleObj.name),e.xp6(1),e.Q6J("ngIf",o.frm.controls.name.touched&&o.frm.controls.name.hasError("required")),e.xp6(2),e.Q6J("translate","Asset.DisplayName"),e.xp6(3),e.Q6J("ngModel",o.roleObj.displayName),e.xp6(1),e.Q6J("ngIf",o.frm.controls.displayName.touched&&o.frm.controls.displayName.hasError("required")),e.xp6(2),e.Oqu(e.lcZ(29,30,"Asset.Save")),e.xp6(3),e.Oqu(e.lcZ(32,32,"Asset.Back")),e.xp6(2),e.Akn(e.DdM(34,R)),e.Q6J("visible",o.errorDisplay),e.xp6(4),e.hij(" ",o.errorMessage,""))},directives:[n._Y,n.JL,n.sg,g.Pi,n.EJ,n.JJ,n.On,n.YN,n.Kr,c.sg,n.Fj,n.u,n.Q7,c.O5,C.V,v.h4],pipes:[g.X$],styles:[""]}),r})();var h=a(20592),b=a(3069),O=a(43239);let J=(()=>{class r{constructor(t,o,l,i,d){this.roleService=t,this.dialog=o,this.data=l,this._snackBar=i,this.route=d,this.lang=localStorage.getItem("lang"),this.textDir="ltr",this.roleObj={id:"",roleCategoryId:0,name:"",displayName:""},this.id="",this.name="",this.arabicName="",this.message="",this.roleObj={...l},this.id=this.roleObj.id,this.name=this.roleObj.name}ngOnInit(){"en"==this.lang?this.textDir="ltr":"ar"==this.lang&&(this.textDir="rtl")}close(){this.dialog.close(),this._snackBar.dismiss(),this.route.navigate(["/dash/roles"])}delete(){this.roleService.DeleteRole(this.id).subscribe(t=>{this.message="Data is deleted successfully",this.action="close",this._snackBar.open(this.message,this.action,{panelClass:"snackbar"}),this.dialog.close(),this.route.navigate(["/dash/roles"])}),this.route.navigate(["/dash/roles"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.N),e.Y36(h.so),e.Y36(h.WI),e.Y36(b.ux),e.Y36(p.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-deleteconfirmation"]],decls:1,vars:3,consts:[[3,"name","close","delete"]],template:function(t,o){1&t&&e._UZ(0,"app-delete",0),2&t&&e.Q6J("name",o.name)("close",o.close.bind(o))("delete",o.delete.bind(o))},directives:[O.T],styles:[""]}),r})();var u=a(70464);function U(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"span",14),e._UZ(2,"i",15),e.TgZ(3,"input",16),e.NdJ("input",function(l){return e.CHM(t),e.oxw(),e.MAs(14).filterGlobal(l.target.value,"contains")}),e.qZA(),e.qZA(),e.qZA()}}function j(r,s){1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"th",17),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"p-sortIcon",18),e.qZA(),e.TgZ(5,"th",19),e._uU(6),e.ALo(7,"translate"),e._UZ(8,"p-sortIcon",20),e.qZA(),e.TgZ(9,"th",21),e._uU(10),e.ALo(11,"translate"),e._UZ(12,"p-sortIcon",22),e.qZA(),e.TgZ(13,"th",23),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"tr"),e.TgZ(17,"th",23),e._UZ(18,"p-columnFilter",24),e.qZA(),e.TgZ(19,"th",23),e._UZ(20,"p-columnFilter",25),e.qZA(),e.TgZ(21,"th",23),e._UZ(22,"p-columnFilter",26),e.qZA(),e._UZ(23,"th"),e.qZA()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,4,"Asset.Name")),e.xp6(4),e.hij("",e.lcZ(7,6,"Asset.DisplayName")," "),e.xp6(4),e.hij("",e.lcZ(11,8,"Asset.CategoryName")," "),e.xp6(4),e.Oqu(e.lcZ(15,10,"Asset.Actions")))}const I=function(r){return["/roles/editrole",r]};function S(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",23),e._uU(2),e.qZA(),e.TgZ(3,"td",23),e._uU(4),e.qZA(),e.TgZ(5,"td",23),e._uU(6),e.qZA(),e.TgZ(7,"td",23),e.TgZ(8,"a",27),e._UZ(9,"i",28),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"a",29),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().deleteRole(i.id)}),e.ALo(12,"translate"),e._UZ(13,"i",30),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.displayName),e.xp6(2),e.Oqu(t.categoryName),e.xp6(2),e.Q6J("routerLink",e.VKq(10,I,t.id)),e.xp6(1),e.s9C("pTooltip",e.lcZ(10,6,"Asset.Edit")),e.xp6(2),e.s9C("pTooltip",e.lcZ(12,8,"Asset.Delete"))}}function L(r,s){1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"td",31),e._uU(2," \u0644\u0627 \u064a\u0648\u062c\u062f \u0623\u062f\u0648\u0627\u0631"),e.qZA(),e.qZA())}const F=function(){return["/roles/addrole"]},E=function(){return[5,10,25,50]},Y=function(){return["name","displayName","categoryName","categoryNameAr"]},D=[{path:"",component:(()=>{class r{constructor(t,o,l,i){this.roleService=t,this.rolecategoryService=o,this.dialog=l,this.route=i,this.lang=localStorage.getItem("lang"),this.loading=!0,this.first=0,this.rows=5,this.lstRoles=[]}ngOnInit(){this.roleService.GetRoles().subscribe(t=>{this.lstRoles=t,this.loading=!1}),this.rolecategoryService.GetRoleCategories().subscribe(t=>{this.lstRoleCategories=t})}deleteRole(t){this.roleService.GetRoleById(t).subscribe(o=>{this.selectedObj=o,this.dialog.open(J,{width:"30%",autoFocus:!0,data:{id:this.selectedObj.id,name:this.selectedObj.name}})}),this.route.navigate(["/dash/roles"])}reload(){let t=this.route.url;this.route.routeReuseStrategy.shouldReuseRoute=()=>!1,this.route.onSameUrlNavigation="reload",this.route.navigate([t])}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){this.first=0}isLastPage(){return!this.lstRoles||this.first===this.lstRoles.length-this.rows}isFirstPage(){return!this.lstRoles||0===this.first}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.N),e.Y36(Z.X),e.Y36(h.uw),e.Y36(p.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-list"]],decls:19,vars:19,consts:[[1,"col-12"],[1,"row","top-buffer"],[1,"col-10"],[1,"card-title"],[1,"col-2"],[1,"addbutton",3,"routerLink"],[1,"fas","fa-plus"],["dataKey","role.id","responsiveLayout","scroll",3,"value","rows","first","showCurrentPageReport","rowsPerPageOptions","loading","paginator","globalFilterFields","rowHover","firstChange"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",1,"form-control",3,"input"],["pSortableColumn","name",2,"text-align","inherit"],["field","name"],["pSortableColumn","displayName",2,"text-align","inherit"],["field","displayName"],["pSortableColumn","categoryName",2,"text-align","inherit"],["field","categoryName"],[2,"text-align","inherit"],["type","text","field","name"],["type","text","field","displayName"],["type","text","field","categoryName"],[3,"routerLink"],["tooltipPosition","top",1,"fas","fa-edit",3,"pTooltip"],["tooltipPosition","top",3,"pTooltip","click"],[1,"fa-solid","fa-trash-alt"],["colspan","4"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h1",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"a",5),e._UZ(8,"i",6),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",1),e.TgZ(12,"div",0),e.TgZ(13,"p-table",7,8),e.NdJ("firstChange",function(i){return o.first=i}),e.YNc(15,U,4,0,"ng-template",9),e.YNc(16,j,24,12,"ng-template",10),e.YNc(17,S,14,12,"ng-template",11),e.YNc(18,L,3,0,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij(" ",e.lcZ(5,12,"Asset.Roles")," "),e.xp6(3),e.Q6J("routerLink",e.DdM(16,F)),e.xp6(2),e.hij(" ",e.lcZ(10,14,"Asset.Create"),""),e.xp6(4),e.Q6J("value",o.lstRoles)("rows",o.rows)("first",o.first)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(17,E))("loading",o.loading)("paginator",!0)("globalFilterFields",e.DdM(18,Y))("rowHover",!0))},directives:[p.yS,u.iA,v.jx,u.lQ,u.fz,u.xl,f.u],pipes:[g.X$],styles:[""]}),r})(),data:{breadcrumb:"Asset.Roles"}},{path:"addrole",component:T,data:{breadcrumb:"Asset.Create"}},{path:"editrole/:roleId",component:x,data:{breadcrumb:"Asset.Edit"}}];let Q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[p.Bz.forChild(D)],p.Bz]}),r})();var k=a(17988),w=a(99451),P=a(6639),B=a(36949),X=a(19361);let z=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[X.F,c.ez,k.T,n.u5,n.UX,b.ZX,h.Is,Q,C.S,g.aw,f.z,w.DL,P.U,u.U$,B.q4]]}),r})()}}]);